{"version":3,"file":"spirograph-index.js","mappings":"+JAKO,MAAMA,GAAkB,IAAAC,gBAAc,GAEtC,SAASC,GAAM,SACpBC,KACGC,IAGH,OADmB,IAAAC,YAAWL,GACP,KAErB,gBAAoB,IAAK,CAAEM,UAAW,WAAYF,GAC9CD,EAGR,CACO,SAASI,GAAQ,KACtBC,EAAI,GACJC,EAAE,SACFN,EAAQ,UACRO,GAAY,EAAK,OACjBC,EAAS,IAQTC,MAAMC,QAAQL,KAAUA,GAAO,IAAAM,GAAEN,IACjCI,MAAMC,QAAQJ,KAAQA,GAAK,IAAAK,GAAEL,IAC7B,MAAMM,EAAIP,EAAKC,GAAGA,GACZO,EAASD,EAAEC,SAEjB,IADmB,IAAAX,YAAWL,GACd,OAAO,KACvB,GAAIgB,EAAS,IAAM,OAAO,KAC1Bb,IAAa,IAAK,QAAQa,GAAS,GACnC,MAAMC,EAAY,EAAId,EAASa,OAE/B,OACE,gBAAoB,IAAK,CACvBE,UAAW,cAAcV,EAAK,OAAOA,EAAK,cACxCO,EAAEI,UAAY,sBACW,GAATR,KAClBL,UAAW,YAERI,GACD,gBAAoB,OAAQ,CAC1BU,MAAO,CAAEC,KAAM,QACfN,EAAG,2EAOL,gBAAoB,OAAQ,CAC5BK,MAAO,CAAEC,KAAM,QACfN,EAAG,6BAECC,EAASC,GAAa,gBACtBD,EAASC,GAAa,iBACvBD,eACAA,oEAMH,gBAAoB,OAAQ,CAC5BI,MAAO,CACLE,OAAQ,OACRC,SAAU,EACVC,iBAAkB,SAClBC,WAAY,UAEdC,EAAGV,EAAS,EACZW,EAAG,GAEDxB,GAIV,C,8EChFO,SAASyB,GAAa,OAC3BC,EAAM,MACNC,EAAK,MACLC,EAAK,SACL5B,IASA,GAFAS,MAAMC,QAAQgB,KAAYA,GAAS,IAAAf,GAAEe,KAClB,IAAAxB,YAAW,MACd,OAAO,KACvB,MACM2B,EAAS,EAAAC,GAAGC,MADH,GACiBJ,GAAOK,MAAK,IAAArB,GAAEe,IACxCO,EAAO,EAAAH,GAAGC,MAFD,GAEeJ,EAAQC,GAAOI,MAAK,IAAArB,GAAEe,IAC9CQ,EAAU,EAAAJ,GAAGC,MAAM,GAAcJ,EAAQC,EAAQ,GAAGI,MAAK,IAAArB,GAAEe,IAC3DS,EAAeC,KAAKC,IAAIT,GAASQ,KAAKE,GAAK,IAAM,IACjDC,EAAYX,EAAQ,EAAI,IAAM,IACpC,OACE,gBAAoB,IAAK,CAAEzB,UAAW,WAClC,gBAAoB,OAAQ,CAC5Bc,MAAO,CAAEC,KAAM,QACfN,EAAG,IAAIiB,EAAON,KAAKM,EAAOL,cAA4BW,KAAgBI,KAAaN,EAAKV,KAAKU,EAAKT,MAElG,gBAAoB,OAAQ,CAC5BP,MAAO,CACLE,OAAQ,OACRC,SAAU,EACVC,iBAAkB,SAClBC,WAAY,UAEdC,EAAGW,EAAQX,EACXC,EAAGU,EAAQV,GAxCiC,OAAzBgB,EA0CAxC,GA1CwCwC,EA0C9B,MAAQ,QAAOZ,GA1CoCa,KAAvF,IAA0BD,CA8C3B,C,gDC3CO,MAAME,EAAgB,IAC3B,gBAAoB,WAAgB,KAChC,gBAAoB,OAAQ,KAC1B,gBAAoB,UAAW,CAAEC,GAAI,OAAQC,aAAc,iBAAkBC,MAAO,IAAKC,OAAQ,KAC/F,gBAAoB,OAAQ,CAC5BlC,EAAG,oCAGHK,MAAO,CAAEE,OAAQ,OAAQ4B,YAAa,OAI1C,gBAAoB,QAAS,KAC3B,oCACA,YACA,gD,qJCdD,MAAMC,EAAO,KACPC,EAAU1B,IAAW,QAAQA,EAAI,MAAM,GAAK,IAG5C2B,EAAsB,CAACC,EAAOC,IACzCA,EAAY,EAAIhB,KAAKiB,IAAI,KAAMF,EAAQ,GAC5BG,EAAqB,CAACH,EAAOI,IAC/B,EAATA,EAAanB,KAAKiB,IAAI,KAAMF,EAAQ,GACzBK,EAA4B,CACvCL,EACAC,IACGA,EAAY,EAAIhB,KAAKqB,IAAI,KAAMN,EAAQ,GAC/BO,EAAyB,CACpCP,EACAQ,IACGA,EAAevB,KAAKwB,IAAI,KAAMT,EAAQ,GAC9BU,EAA4B,CACvCV,EACAQ,IACkB,EAAfA,EAAmBvB,KAAKqB,IAAI,KAAMN,EAAQ,GAExC,SAASW,GAAe,MAC7BX,EAAK,OACLI,EAAM,WACNQ,EAAa,EAAC,WACdC,KACG/D,IAOH,QAAKgE,IAAcD,SAAiBC,IAAcV,GAChD,MAAM,IAAIW,MAAM,6CAEdD,IAAcV,IAChBA,EAASL,EAAoBC,EAAOa,IAEtC,MAAM,EAAEzC,EAAC,EAAEC,GAAM,EAAAM,GAAGC,MAAMwB,EAAQQ,GAClC,OACE,gBAAoB,OAAQ,CAC1BnD,EAAGuD,CAAI;WACF5C,KAAKC;WACN,QAAW,EAAG2B,GAAOiB,KACpBC,GAAMF,CAAI,IAAI,EAAArC,GAAGC,MAAMwB,EAAQQ,EAAaM,GAAK,KAAMlB,cAEzDlD,GAGT,CAEO,SAASqE,GAAQ,GACtB3B,EAAE,SACF3C,EAAQ,MACRuE,EAAK,QACLC,IAOA,OACE,gBAAoB,WAAgB,KAChC,gBAAoB,IAAK,CAAE7B,GAAIA,GAAM3C,IACrC,QAAW,EAAGuE,EAAQ,GAAGH,KAAKC,GAC9B,gBAAoB,MAAO,CACzBI,IAAKJ,EACLK,UAAW,IAAM/B,EACjB5B,UAAW,WAAWsD,EAAI,GAAKG,aAKzC,CAEO,SAASL,EACdQ,KACGC,GAEH,MAAMC,EAAUtD,GACd,iBAAoBA,EAChB,GAAKA,EACL,iBAAoBA,EACpBA,EACAd,MAAMC,QAAQa,GACdA,EAAE6C,IAAIS,GAAQC,KAAK,KACnBvD,EAAEA,EAAI,IAAMA,EAAEC,EACpB,IAAIuD,EAASJ,EAAQ,GACrB,IAAK,IAAIN,EAAI,EAAGA,EAAIO,EAAK/D,OAAQwD,IAC/BU,GAAUF,EAAOD,EAAKP,IACtBU,GAAUJ,EAAQN,EAAI,GAExB,OAAOU,CACT,CAEO,MAAMC,EAAgBC,IAC3B,MAAMC,EAAYC,OAAOC,KAAKH,EAAK,SAAU,uBACzCC,IAAWA,EAAUG,OAAS,M,wFCnF7B,SAASC,GAAO,WACrBC,EAAU,UACVC,EAAS,OACTjC,EAAM,MACNtC,EAAK,UACLwE,EAAS,SACTzF,IASA,MAAM0F,EAAgBD,GAAa,CACjCrD,KAAKuD,KAAK,GAAIpC,EAASkC,EAAU,IACjCrD,KAAKuD,KAAK,GAAIpC,EAASkC,EAAU,KAE7BG,GAAQ,IAAA1F,YAAW,MACnB2F,EAAaJ,EACf,CAACC,EAAc,GAAIA,EAAc,GAAID,EAAU,GAAIA,EAAU,IAC7D,EAAElC,GAASA,EAAiB,EAATA,EAAqB,EAATA,GAE7BuC,EAAYN,EAAYD,EACxBQ,EAASxC,EAASiC,EACxB,OACE,gBAAoB,MAAO,CACzBQ,MAAO,6BACPC,WAAY,+BACZhF,MAAO,CACLC,KAAM,OACNC,OAAQ,UACR4B,YAAc,EAAI,KAAQ,OACvB9B,GAEL4B,MAAOgD,EAAW,GAAK,KACvB/C,OAAQ+C,EAAW,GAAK,KACxBK,QAASL,EAAWf,KAAK,KACzB3E,UAAW,UAET,gBAAoB,IAAe,MACnC,gBAAoB,KAAO,CAAEY,UAAW,kCACtC,gBAAoB,OAAQ,CAC5BE,MAAO,CAAEC,KAAM,QACfN,EAAG,IAAI;cACJ,IAAAD,GAAE4E,EAAaQ,EAAoB,IAAZD;cACvB,IAAAnF,GAAE4E,EAAYO;cACd,IAAAnF,GAAE4E,EAAY;cACd,IAAA5E,IAAG4E,EAAY;cACf,IAAA5E,IAAG4E,EAAYO;cACf,IAAAnF,GAAEoF,EAASR,EAAwB,KAAZO;cAG1B,gBAAoB,KAAS,CAAEzF,MAAM,IAAAM,GAAE4E,EAAY,GAAIjF,IAAI,IAAAK,IAAG4E,EAAY,KAC1E,gBAAoB,KAAS,CAAElF,MAAM,IAAAM,GAAE4E,EAAYO,GAAYxF,IAAI,IAAAK,GAAE4E,EAAY,KACjF,gBAAoB,KAAS,CAC7BlF,MAAM,IAAAM,GAAEoF,EAASR,EAAYO,GAC7BxF,IAAI,IAAAK,GAAE,EAAGmF,OAIVF,GAASH,GACV,gBAAoB,OAAQ,CAC1BlE,EAAGmE,EAAc,GACjBlE,EAAGkE,EAAc,GACjB7C,MAAO4C,EAAU,GACjB3C,OAAQ2C,EAAU,KAGpBzF,EAGR,C,qHC7EO,SAASmG,EACdC,EACAC,EACAC,GAEA,OACElE,KAAKE,GAAK,EAAI+D,EAAejE,KAAKmE,KAAMD,EAAKF,EAAKhE,KAAKiB,IAAIgD,GAE/D,CACO,SAASG,EACdC,EACAJ,EACAC,GAEA,OACEA,EAAKlE,KAAKwB,IAAI6C,EAAQrE,KAAKE,GAAK,EAAI+D,GAAgBjE,KAAKiB,IAAIgD,EAEjE,CAEO,SAASK,EAAezG,GAQ7B,MAAM,WAAEsF,EAAU,UAAEC,EAAS,OAAEjC,EAAM,MAAEJ,GAAUlD,EAC3C0G,GAAiB,QAAuBxD,EAAOoC,GAC/CqB,GAAgB,QAAuBzD,EAAOqC,GAE9CqB,EAAc,KAAM1D,EAAQ,EAC5B2D,EAAgBX,EAAY5C,EAAQsD,EAAaF,GACjDf,GAAQ,IAAA1F,YAAW,MACzB,SAAS6G,EAAUC,GAGjB,OAAOpB,EAAQ,CAAC,EAAI,CAAEzE,OAAQ6F,EAChC,CAEA,MAAMC,GAAgB,IAAAtG,GAAEgG,EAAgB,GAAG3E,KACzC,EAAAF,GAAGC,MAAMyD,EAAYD,EAAYsB,IAE7BK,EAAS,EAAApF,GAAGqF,EACZC,EAAWC,GAAMJ,EAAcjF,KAAKkF,EAAOI,MAAMD,IACjDE,EAAcH,GAClB,SAAiBC,GAAMD,EAAQC,GAAGxG,SAAW0C,GAAQ,EAAG,IAE1D,OACE,gBAAoB,IAAQ,IAAKtD,GAC7B,gBAAoB,IAAK,CAAEE,UAAW,QACpC,gBAAoB,KAAgB,CACpCoD,OAAQoD,EACRxD,MAAOA,EACPhD,UAAW,WAEX,gBAAoB,KAAS,CAC7BK,QAAS,GACTH,KAAM,CAAC,EAAG,GACVC,GAAI,EAAAwB,GAAGC,MAAMwD,EAAYsB,IACjC,cAGQ,gBAAoB,KAAS,CAC7BrG,QAAS,GACTH,KAAM,EAAAyB,GAAGC,MAAMwD,EAAYsB,GAC3BvG,GAAI,EAAAwB,GAAGC,MAAMyD,EAAWqB,GACxBtG,WAAW,GACnB,aAGQ,gBAAoB,KAAS,CAC7BC,QAAS,GACTH,KAAM,EAAAyB,GAAGC,MAAMyD,EAAWqB,GAC1BvG,GAAI,EAAAwB,GAAGC,MAAMwB,EAAQsD,GACrBtG,WAAW,GACnB,UAGQ,gBAAoB,IAAc,CAClCmB,OAAQuF,EACRtF,MAAOS,KAAKE,GACZV,MAAOiF,IAEP,gBAAoB,KAAS,CAC7BxG,KAAM,EAAAyB,GAAGC,MAAM4E,GAAiB,KAAMxD,GACtC7C,GAAI,EAAAwB,GAAGC,MAAM4E,EAAgB,KAE7B,gBAAoB,KAAS,CAAEhE,GAAI,MAAO4B,MAAOpB,EAAOqB,QAAS,IAAMrB,GACrE,gBAAoB,OAAQ,CAC5BvC,EAAG,IAAI;mBACA+F;mBACApD,IACPpD,UAAW,WACXc,MAAO8F,EAAU,WAEjB,gBAAoB,OAAQ,CAC5BnG,EAAG,IAAI;mBACA+F;mBACA,EAAA7E,GAAGC,MAAMwB,EAAQuD;mBACjBH;mBACAM,IACP9G,UAAW,SACXc,MAAO8F,EAAU,UAEjB,gBAAoB,OAAQ,CAC5BnG,EAAG,IAAI;mBACAqG;mBACA,EAAAnF,GAAGC,MAAMwB,GAASuD,KACzB3G,UAAW,WACXc,MAAO8F,EAAU,UAEjB,gBAAoB,OAAQ,CAC5BnG,EAAG,IAAI;mBACAgG;mBACA,EAAA9E,GAAGC,MAAM4E,GAAiB,KAAMxD,GAAOnB,KACxC,EAAAF,GAAGC,MAAMyD,EAAYD,GAAa,KAAMpC,EAAQ,MAEtDhD,UAAW,SACXc,MAAO8F,EAAU,aAEjB,gBAAoB,OAAQ,CAC5BnG,EAAG,IAAI;mBACA,EAAAkB,GAAGC,MAAM4E,GAAiB,KAAMxD,GAAOnB,KACxC,EAAAF,GAAGC,MAAMyD,EAAYD,GAAa,KAAMpC,EAAQ;mBAE/C,EAAArB,GAAGC,MAAM6E,GAAgB,KAAMzD,KACtChD,UAAW,WACXc,MAAO8F,EAAU,YAEjB,gBAAoB,OAAQ,CAC5BnG,EAAG,IAAI;mBACAqG;mBACAM,IACPpH,UAAW,SACXc,MAAO8F,EAAU,WAIrB,gBAAoB,IAAK,CAAE5G,UAAW,OACpC,gBAAoB,SAAU,CAAEiG,EAAG7C,KAI7C,C,kGCrFA,MAAMiE,EAAQ,IAnCd,MACEC,YAIIlE,EAIA3C,GACA8G,KAAKnE,OAASA,EAAOmE,KAAK9G,EAAIA,CAAE,CAEpCoD,aAEE,OAAe,GADD,QAAY0D,KAAKnE,OAAQ,GAAK,KAAKmE,KAAK9G,GACnC8G,KAAKnE,MAC1B,CAEAoE,iBAAiBC,GACf,MAAM5D,EAAa0D,KAAK1D,aAClB6D,EAAezF,KAAK0F,MAAMF,EAAW5D,GAC3C,IAAI+D,EAAcH,EAAW5D,EACzB+D,EAAc/D,EAAa,IAAG+D,GAAe/D,GACjD,MAAMgE,EAAQD,EAAcL,KAAKnE,OAEjC,OAAQsE,EAAe,EAAAvF,GAAM,EAAI0F,CACnC,CAEAC,eAAexB,GAGb,OAFAA,GAAiB,EAAAnE,GAAK,GACV,EAAAA,GAAK,IAAGmE,GAAgB,EAAAnE,GAAK,IAClC,QAAamE,EAAO,GAAK,KAAKiB,KAAK9G,EAC5C,GAIyB,GAAK,IAE1BsH,EArDN,SAAmB3E,EAAQ3C,GACzB,MAAMoH,GAAQ,QAoDS,EApDW,GAAK,KAoDb,KAnDpBhE,EAAqB,EAARgE,EAmDI,EAjDvB,OADAG,QAAQC,IAAIpE,EAAYgE,EAAQ,MACzB,SAAUzG,GACMa,KAAK0F,MAAMvG,EAAIyC,GACpC,IAAI+D,EAAcxG,EAAIyC,EAEtB,OADI+D,EAAc/D,EAAa,IAAG+D,GAAe/D,GAC1C,EAEL,IAAArD,GA2CsB,IAAH,EA3CL,GAAGqB,KAAK,EAAAF,GAAGC,MA2CN,EA3CoBgG,EA2CpB,IAxCvB,CACF,CAuCeM,GAEf,SAASC,EAAKC,GACZ,MACMC,EAAahB,EAAMG,iBADL,IACsBY,GACpCE,EAAcjB,EAAMS,eAAeM,EAFrB,KAGdG,EAAc,EAAA5G,GAAGC,MAHH,IAGuB0G,EAAaF,GACxD,MAAO,CAILL,EAAOK,GAAG,GAGVG,EAAY1G,KAAK,EAAAF,GAAGC,OAAO,GAAKyG,IAKpC,CAwCe,SAAS,IACtB,MAAMG,GAAY,IAAAC,QAAO,MAEnBC,GAAQ,SAed,OAbA,IAAAC,YAAU,KACR,MAAMC,EAASJ,EAAUK,QAIzB,OAHAD,EAAOjG,OAASmG,iBAAmBF,EAAOG,aAC1CH,EAAOlG,MAAQoG,iBAAmBF,EAAOI,YA9C7C,SAAmBC,EAASC,GAE1BD,EAAQE,UAAY,KACpB,MAAMC,EAAQnH,KAAKuD,IAAIyD,EAAQL,OAAOlG,MAAOuG,EAAQL,OAAOjG,QAC5DsG,EAAQG,MAAMA,EAAOA,GACrBH,EAAQI,UAAU,GAAK,IACvBJ,EAAQG,MAAM,IAAM,KACpB,IAAIE,EAAW,EACXC,GAAO,EACX,MAAMC,EAAarB,EAAK,GAwBxB,OADAsB,uBArBA,SAASC,EAAMC,GACb,KAAOL,EAAWK,EAAkBL,GAAY,EAAG,CACjD,MACMM,EAAYzB,EADRmB,EAAW,KAGrB,IAAK,IAAIpF,EAAI,EAAGA,EAAIsF,EAAW9I,OAAQwD,IAAK,CAC1C,MAAM2F,EAAWD,EAAU1F,GACrB4F,EAAYN,EAAWtF,GACzB4F,EAAUC,WAAWF,GAAY,OACnCZ,EAAQe,YACRf,EAAQgB,YAAcf,EAAOhF,GAC7B+E,EAAQiB,OAAOJ,EAAU1I,EAAG0I,EAAUzI,GACtC4H,EAAQkB,OAAON,EAASzI,EAAGyI,EAASxI,GACpC4H,EAAQjI,SACRwI,EAAWtF,GAAK2F,EAEpB,CACF,EACCN,GAAQE,sBAAsBC,EACjC,IAGO,KACLH,GAAO,EAEX,CAYWa,CADSxB,EAAOyB,WAAW,MACR,CACxB3B,EAAM4B,QAAQC,QAAQC,KACtB9B,EAAM4B,QAAQG,UAAUD,KACxB,MACA,OACA,SACD,GACA,CAAC9B,EAAM4B,UAER,gBAAoB,KAAM,CAAEI,WAAW,EAAM5J,MAAO,CAAE6J,UAAW,UAC7D,gBAAoB,KAAM,CAAEC,MAAM,EAAMC,GAAI,IAC1C,gBAAoB,SAAU,CAAEC,IAAKtC,EAAW1H,MAAO,CAAE4B,MAAO,OAAQC,OAAQ,WAI1F,C","sources":["/dev/workshop/./src/paperBox1/Measure.tsx?","/dev/workshop/./src/paperBox1/MeasureAngle.tsx?","/dev/workshop/./src/paperBox1/SvgCommonDefs.tsx?","/dev/workshop/./src/paperBox1/common.tsx?","/dev/workshop/./src/paperBox2/Common.tsx?","/dev/workshop/./src/paperBox2/InsideFoldsSvg.tsx?","/dev/workshop/./src/spirograph/index.tsx?"],"sourcesContent":["import * as React from \"react\"\nimport { createContext, useContext } from \"react\"\nimport { DEG, round10, V, } from \"ts3dutils\"\n\n\nexport const SvgPrintContext = createContext(false)\n\nexport function Guide({\n  children,\n  ...props\n}) {\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  return (\n    React.createElement('g', { className: \"guide\", ...props,}\n      , children\n    )\n  )\n}\nexport function Measure({\n  from,\n  to,\n  children,\n  hideRight = false,\n  offset = 0,\n}\n\n\n\n\n\n) {\n  Array.isArray(from) && (from = V(from))\n  Array.isArray(to) && (to = V(to))\n  const d = from.to(to)\n  const length = d.length()\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  if (length < 0.05) return null\n  children ||= \"\" + round10(length, -1)\n  const textBlank = 3 * children.length\n\n  return (\n    React.createElement('g', {\n      transform: ` translate(${from[0]}, ${from[1]}) rotate(${\n        d.angleXY() / DEG\n      }) translate(0, ${offset * 10})`,\n      className: \"measure\",}\n\n      , !hideRight && (\n        React.createElement('path', {\n          style: { fill: \"none\" },\n          d: `M0,0\n          l0,10\n          M4,3\n          l-4,2\n          l4,2`,}\n        )\n      )\n      , React.createElement('path', {\n        style: { fill: \"none\" },\n        d: `\n        M0,5\n        H${(length - textBlank) / 2}\n        M${(length + textBlank) / 2},5\n        H${length}\n        M${length},0\n        l0,10\n        m-4,-7\n        l4,2\n        l-4,2`,}\n      )\n      , React.createElement('text', {\n        style: {\n          stroke: \"none\",\n          fontSize: 4,\n          dominantBaseline: \"middle\",\n          textAnchor: \"middle\",\n        },\n        x: length / 2,\n        y: 5,}\n\n        , children\n      )\n    )\n  )\n}\n"," function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }import * as React from \"react\"\nimport { useContext } from \"react\"\nimport { V, V3 } from \"ts3dutils\"\nimport { fmtdeg, } from \"./common\"\nimport { SvgPrintContext } from \"./Measure\"\n\nexport function MeasureAngle({\n  center,\n  start,\n  toRel,\n  children,\n}\n\n\n\n\n) {\n  Array.isArray(center) && (center = V(center))\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  const radius = 20\n  const startV = V3.polar(radius, start).plus(V(center))\n  const endV = V3.polar(radius, start + toRel).plus(V(center))\n  const textPos = V3.polar(0.7 * radius, start + toRel / 2).plus(V(center))\n  const largeArcFlag = Math.abs(toRel) > Math.PI ? \"1\" : \"0\"\n  const sweepFlag = toRel > 0 ? \"1\" : \"0\"\n  return (\n    React.createElement('g', { className: \"measure\",}\n      , React.createElement('path', {\n        style: { fill: \"none\" },\n        d: `M${startV.x},${startV.y} A${radius},${radius},0,${largeArcFlag},${sweepFlag},${endV.x},${endV.y}`,}\n      )\n      , React.createElement('text', {\n        style: {\n          stroke: \"none\",\n          fontSize: 4,\n          dominantBaseline: \"middle\",\n          textAnchor: \"middle\",\n        },\n        x: textPos.x,\n        y: textPos.y,}\n\n        , _nullishCoalesce(children, () => ( fmtdeg(toRel)))\n      )\n    )\n  )\n}\n","import * as React from \"react\"\n\n\nexport const SvgCommonDefs = () => (\n  React.createElement(React.Fragment, null\n    , React.createElement('defs', null\n      , React.createElement('pattern', { id: \"glue\", patternUnits: \"userSpaceOnUse\", width: \"4\", height: \"4\",}\n        , React.createElement('path', {\n          d: \"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2\"\n\n              ,\n          style: { stroke: \"#eee\", strokeWidth: 1 },}\n        )\n      )\n    )\n    , React.createElement('style', null\n      , \".valley {stroke-dasharray: 1,1;} \"\n      , \".outline \"\n      , \".mountain {stroke-dasharray: 10,2,1,1,1,2;} \"\n    )\n  )\n)\n","import * as React from \"react\"\n\nimport { arrayRange, DEG, round10, TAU, V3 } from \"ts3dutils\"\n\nexport const INCH = 25.4\nexport const fmtdeg = (x) => \"\" + round10(x / DEG, -1) + \"Â°\"\n \n\nexport const radiusFromSideWidth = (sides, sideWidth) =>\n  sideWidth / 2 / Math.sin(TAU / sides / 2)\nexport const sideWithFromRadius = (sides, radius) =>\n  radius * 2 * Math.sin(TAU / sides / 2)\nexport const centerToSideFromSideWidth = (\n  sides,\n  sideWidth,\n) => sideWidth / 2 / Math.tan(TAU / sides / 2)\nexport const radiusFromCenterToSide = (\n  sides,\n  centerToSide,\n) => centerToSide / Math.cos(TAU / sides / 2)\nexport const sideWidthFromCenterToSide = (\n  sides,\n  centerToSide,\n) => centerToSide * 2 * Math.tan(TAU / sides / 2)\n\nexport function RegularPolygon({\n  sides,\n  radius,\n  startAngle = 0,\n  sideLength = undefined,\n  ...props\n}\n\n\n\n\n) {\n  if ((undefined !== sideLength) === (undefined !== radius)) {\n    throw new Error(\"must set either sideLength or radius\")\n  }\n  if (undefined === radius) {\n    radius = radiusFromSideWidth(sides, sideLength)\n  }\n  const { x, y } = V3.polar(radius, startAngle)\n  return (\n    React.createElement('path', {\n      d: dTpl`\n        M${x},${y}\n        ${arrayRange(0, sides).map(\n          (i) => dTpl`L${V3.polar(radius, startAngle + i * (TAU / sides))}`,\n        )}Z`,\n      ...props,}\n    )\n  )\n}\n\nexport function RotStep({\n  id,\n  children,\n  count,\n  stepDeg,\n}\n\n\n\n\n) {\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('g', { id: id,}, children)\n      , arrayRange(0, count - 1).map((i) => (\n        React.createElement('use', {\n          key: i,\n          xlinkHref: \"#\" + id,\n          transform: `rotate(${(i + 1) * stepDeg} 0 0)`,}\n        )\n      ))\n    )\n  )\n}\n\nexport function dTpl(\n  strings,\n  ...exps\n) {\n  const format = (x) =>\n    \"number\" === typeof x\n      ? \"\" + x\n      : \"string\" === typeof x\n      ? x\n      : Array.isArray(x)\n      ? x.map(format).join(\" \")\n      : x.x + \",\" + x.y\n  let result = strings[0]\n  for (let i = 0; i < exps.length; i++) {\n    result += format(exps[i])\n    result += strings[i + 1]\n  }\n  return result\n}\n\nexport const openInNewTab = (url) => {\n  const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  if (newWindow) newWindow.opener = null\n}\n","import * as React from \"react\"\nimport { useContext } from \"react\"\nimport { V } from \"ts3dutils\"\n\nimport { dTpl, INCH } from \"../paperBox1/common\"\nimport { Guide, Measure, SvgPrintContext } from \"../paperBox1/Measure\"\n\nimport { SvgCommonDefs } from \"../paperBox1/SvgCommonDefs\"\n\n// https://math.stackexchange.com/a/885965/230980\nexport function lookUpAngle(\n  r,\n  lookUpAngle2,\n  r2,\n) {\n  return (\n    Math.PI / 2 - lookUpAngle2 - Math.acos((r2 / r) * Math.sin(lookUpAngle2))\n  )\n}\n\nexport function Common({\n  baseRadius,\n  topRadius,\n  radius,\n  style,\n  paperSize,\n  children,\n}\n\n\n\n\n\n\n) {\n  const paperPosition = paperSize && [\n    Math.min(-20, radius - paperSize[0]),\n    Math.min(-20, radius - paperSize[1]),\n  ]\n  const print = useContext(SvgPrintContext)\n  const svgViewBox = paperSize\n    ? [paperPosition[0], paperPosition[1], paperSize[0], paperSize[1]]\n    : [-radius, -radius, radius * 2, radius * 2]\n\n  const boxHeight = topRadius - baseRadius\n  const topLip = radius - topRadius\n  return (\n    React.createElement('svg', {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n      style: {\n        fill: \"none\",\n        stroke: \"#123456\",\n        strokeWidth: (2 * INCH) / 300,\n        ...style,\n      },\n      width: svgViewBox[2] + \"mm\",\n      height: svgViewBox[3] + \"mm\",\n      viewBox: svgViewBox.join(\" \"),\n      className: \"adrian\",}\n\n      , React.createElement(SvgCommonDefs, null )\n      , React.createElement(Guide, { transform: \"translate(-20 -20) rotate(180)\"  ,}\n        , React.createElement('path', {\n          style: { fill: \"none\" },\n          d: dTpl`\n          M${V(baseRadius - topLip, boxHeight * 0.99)}\n          L${V(baseRadius, boxHeight)}\n          L${V(baseRadius, 0)}\n          L${V(-baseRadius, 0)}\n          L${V(-baseRadius, boxHeight)}\n          L${V(topLip - baseRadius, boxHeight * 1.01)}\n          `,}\n        )\n        , React.createElement(Measure, { from: V(baseRadius, 0), to: V(-baseRadius, 0),} )\n        , React.createElement(Measure, { from: V(baseRadius, boxHeight), to: V(baseRadius, 0),} )\n        , React.createElement(Measure, {\n          from: V(topLip - baseRadius, boxHeight),\n          to: V(0, boxHeight),}\n        )\n      )\n\n      , !print && paperSize && (\n        React.createElement('rect', {\n          x: paperPosition[0],\n          y: paperPosition[1],\n          width: paperSize[0],\n          height: paperSize[1],}\n        )\n      )\n      , children\n    )\n  )\n}\n","import * as React from \"react\"\nimport { useContext } from \"react\"\nimport { newtonIterate1d, TAU, V, V3 } from \"ts3dutils\"\n\nimport {\n  dTpl,\n  radiusFromCenterToSide,\n  RegularPolygon,\n  RotStep,\n} from \"../paperBox1/common\"\nimport { Measure, SvgPrintContext } from \"../paperBox1/Measure\"\nimport { MeasureAngle } from \"../paperBox1/MeasureAngle\"\n\nimport { Common } from \"./Common\"\n\n// https://math.stackexchange.com/a/885965/230980\nexport function lookUpAngle(\n  r,\n  lookUpAngle2,\n  r2,\n) {\n  return (\n    Math.PI / 2 - lookUpAngle2 - Math.acos((r2 / r) * Math.sin(lookUpAngle2))\n  )\n}\nexport function lookUpRadius(\n  angle,\n  lookUpAngle2,\n  r2,\n) {\n  return (\n    r2 / Math.cos(angle - Math.PI / 2 + lookUpAngle2) / Math.sin(lookUpAngle2)\n  )\n}\n\nexport function InsideFoldsSvg(props\n\n\n\n\n\n\n) {\n  const { baseRadius, topRadius, radius, sides } = props\n  const basePolyRadius = radiusFromCenterToSide(sides, baseRadius)\n  const topPolyRadius = radiusFromCenterToSide(sides, topRadius)\n\n  const creaseAngle = TAU / sides / 2\n  const innerAngleToC = lookUpAngle(radius, creaseAngle, basePolyRadius)\n  const print = useContext(SvgPrintContext)\n  function highlight(color) {\n    // The colors mainly serve to make the code more readable, i.e. you know\n    // which code makes which line. When printing, no colors.\n    return print ? {} : { stroke: color }\n  }\n\n  const redStartPoint = V(basePolyRadius, 0).plus(\n    V3.polar(topRadius - baseRadius, creaseAngle),\n  )\n  const redDir = V3.X\n  const redLine = (t) => redStartPoint.plus(redDir.times(t))\n  const redEndpoint = redLine(\n    newtonIterate1d((t) => redLine(t).length() - radius, 1, 4),\n  )\n  return (\n    React.createElement(Common, { ...props,}\n      , React.createElement('g', { className: \"fold\",}\n        , React.createElement(RegularPolygon, {\n          radius: basePolyRadius,\n          sides: sides,\n          className: \"valley\",}\n        )\n        , React.createElement(Measure, {\n          offset: -0.5,\n          from: [0, 0],\n          to: V3.polar(baseRadius, creaseAngle),}\n, \"baseRadius\"\n\n        )\n        , React.createElement(Measure, {\n          offset: -0.5,\n          from: V3.polar(baseRadius, creaseAngle),\n          to: V3.polar(topRadius, creaseAngle),\n          hideRight: true,}\n, \"topRadius\"\n\n        )\n        , React.createElement(Measure, {\n          offset: -0.5,\n          from: V3.polar(topRadius, creaseAngle),\n          to: V3.polar(radius, creaseAngle),\n          hideRight: true,}\n, \"radius\"\n\n        )\n        , React.createElement(MeasureAngle, {\n          center: redStartPoint,\n          start: Math.PI,\n          toRel: creaseAngle,}\n        )\n        , React.createElement(Measure, {\n          from: V3.polar(basePolyRadius, -TAU / sides),\n          to: V3.polar(basePolyRadius, 0),}\n        )\n        , React.createElement(RotStep, { id: \"foo\", count: sides, stepDeg: 360 / sides,}\n          , React.createElement('path', {\n            d: dTpl`\n                M${basePolyRadius},0\n                H${radius}`,\n            className: \"mountain\",\n            style: highlight(\"green\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${basePolyRadius},0\n                L${V3.polar(radius, innerAngleToC)}\n                M${basePolyRadius},0\n                L${redStartPoint}`,\n            className: \"valley\",\n            style: highlight(\"blue\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${redStartPoint}\n                L${V3.polar(radius, -innerAngleToC)}`,\n            className: \"mountain\",\n            style: highlight(\"blue\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${topPolyRadius},0\n                L${V3.polar(basePolyRadius, -TAU / sides).plus(\n                  V3.polar(topRadius - baseRadius, -TAU / sides / 2),\n                )}`,\n            className: \"valley\",\n            style: highlight(\"hotpink\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${V3.polar(basePolyRadius, -TAU / sides).plus(\n                  V3.polar(topRadius - baseRadius, -TAU / sides / 2),\n                )}\n                L${V3.polar(topPolyRadius, -TAU / sides)}`,\n            className: \"mountain\",\n            style: highlight(\"orange\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${redStartPoint}\n                L${redEndpoint}`,\n            className: \"valley\",\n            style: highlight(\"red\"),}\n          )\n        )\n      )\n      , React.createElement('g', { className: \"cut\",}\n        , React.createElement('circle', { r: radius,} )\n      )\n    )\n  )\n}\n","import Grid from \"@mui/material/Grid\"\nimport { useTheme } from \"@mui/material/styles\"\nimport * as React from \"react\"\nimport { useEffect, useRef } from \"react\"\nimport { DEG, PI, V, V3 } from \"ts3dutils\"\nimport { lookUpAngle, lookUpRadius } from \"../paperBox2/InsideFoldsSvg\"\n\nclass Circle {\n  constructor(  radius) {;this.radius = radius;}\n\n  angleForDistance(distance) {\n    return distance / this.radius\n  }\n\n  radiusForAngle(angle) {\n    return this.radius\n  }\n}\nfunction _circle(radius) {\n  return function (x) {\n    const angle = x / radius\n    return [V3.polar(radius, angle), V3.polar(1, angle + PI / 2)]\n  }\n}\nfunction _squarcle(radius, d) {\n  const alpha = lookUpAngle(radius, 45 * DEG, d)\n  const sideLength = alpha * 2 * radius\n  console.log(sideLength, alpha / DEG)\n  return function (x) {\n    const quarterCount = Math.floor(x / sideLength)\n    let quarterRest = x % sideLength\n    if (quarterRest > sideLength / 2) quarterRest -= sideLength\n    return [\n      // M4.rotateZ(quarterCount * (Math.PI / 2)).transformVector(\n      V(d - radius, 0).plus(V3.polar(radius, quarterRest / radius)),\n      // ),\n    ]\n  }\n}\n\nclass Squarcle {\n  constructor(\n    /**\n     * side of the side curvature\n     */\n      radius,\n    /**\n     * Distance center to closest point on side\n     */\n      d,\n  ) {;this.radius = radius;this.d = d;}\n\n  sideLength() {\n    const alpha = lookUpAngle(this.radius, 45 * DEG, this.d)\n    return alpha * 2 * this.radius\n  }\n\n  angleForDistance(distance) {\n    const sideLength = this.sideLength()\n    const quarterCount = Math.floor(distance / sideLength)\n    let quarterRest = distance % sideLength\n    if (quarterRest > sideLength / 2) quarterRest -= sideLength\n    const alpha = quarterRest / this.radius\n\n    return (quarterCount * PI) / 2 + alpha\n  }\n\n  radiusForAngle(angle) {\n    angle = angle % (PI / 2)\n    if (angle > PI / 4) angle = angle - PI / 2\n    return lookUpRadius(angle, 45 * DEG, this.d)\n  }\n}\n\n// const shape = new Circle(1 / 3.14)\nconst shape = new Squarcle(0.5, 0.4)\n// const _shape = _circle(2)\nconst _shape = _squarcle(2, 1.8)\n\nfunction line(s) {\n  const outerRadius = 1.5\n  const shapeAngle = shape.angleForDistance(s * outerRadius)\n  const shapeRadius = shape.radiusForAngle(s / outerRadius)\n  const shapeCenter = V3.polar(outerRadius - shapeRadius, s)\n  return [\n    //\n    // V3.polar(outerRadius, Math.min(s, TAU)),\n    // shapeCenter,\n    _shape(s)[0],\n    // V3.polar(shapeRadius, shapeAngle),\n    // shapeCenter.plus(V3.polar(0.2, shapeAngle)),\n    shapeCenter.plus(V3.polar(-0.2, shapeAngle)),\n    // shapeCenter.plus(V3.polar(0.2, innerCircleAngle)),\n    // shapeCenter.plus(V3.polar(0.4, innerCircleAngle + TAU / 3)),\n    // shapeCenter.plus(V3.polar(0.4, innerCircleAngle + (2 * TAU) / 3)),\n  ]\n}\n\nfunction startAnim(context, colors) {\n  // context.rect(100, 100, 100, 100)\n  context.lineWidth = 0.005\n  const scale = Math.min(context.canvas.width, context.canvas.height)\n  context.scale(scale, scale)\n  context.translate(0.5, 0.5)\n  context.scale(0.25, 0.25)\n  let lastTime = 0\n  let stop = false\n  const lastPoints = line(0)\n\n  function paint(highResTimeStamp) {\n    for (; lastTime < highResTimeStamp; lastTime += 1) {\n      const s = lastTime / 1000.0\n      const newPoints = line(s)\n\n      for (let i = 0; i < lastPoints.length; i++) {\n        const newPoint = newPoints[i]\n        const lastPoint = lastPoints[i]\n        if (lastPoint.distanceTo(newPoint) > 0.0001) {\n          context.beginPath()\n          context.strokeStyle = colors[i]\n          context.moveTo(lastPoint.x, lastPoint.y)\n          context.lineTo(newPoint.x, newPoint.y)\n          context.stroke()\n          lastPoints[i] = newPoint\n        }\n      }\n    }\n    !stop && requestAnimationFrame(paint)\n  }\n\n  requestAnimationFrame(paint)\n  return () => {\n    stop = true\n  }\n}\n\nexport default function () {\n  const canvasRef = useRef(null)\n\n  const theme = useTheme()\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    canvas.height = devicePixelRatio * canvas.offsetHeight\n    canvas.width = devicePixelRatio * canvas.offsetWidth\n    const context = canvas.getContext(\"2d\")\n    return startAnim(context, [\n      theme.palette.primary.main,\n      theme.palette.secondary.main,\n      \"red\",\n      \"blue\",\n      \"black\",\n    ])\n  }, [theme.palette])\n  return (\n    React.createElement(Grid, { container: true, style: { minHeight: \"100vh\" },}\n      , React.createElement(Grid, { item: true, xs: 12,}\n        , React.createElement('canvas', { ref: canvasRef, style: { width: \"100%\", height: \"100%\" },} )\n      )\n    )\n  )\n}\n"],"names":["SvgPrintContext","createContext","Guide","children","props","useContext","className","Measure","from","to","hideRight","offset","Array","isArray","V","d","length","textBlank","transform","angleXY","style","fill","stroke","fontSize","dominantBaseline","textAnchor","x","y","MeasureAngle","center","start","toRel","startV","V3","polar","plus","endV","textPos","largeArcFlag","Math","abs","PI","sweepFlag","lhs","rhsFn","SvgCommonDefs","id","patternUnits","width","height","strokeWidth","INCH","fmtdeg","radiusFromSideWidth","sides","sideWidth","sin","sideWithFromRadius","radius","centerToSideFromSideWidth","tan","radiusFromCenterToSide","centerToSide","cos","sideWidthFromCenterToSide","RegularPolygon","startAngle","sideLength","undefined","Error","dTpl","map","i","RotStep","count","stepDeg","key","xlinkHref","strings","exps","format","join","result","openInNewTab","url","newWindow","window","open","opener","Common","baseRadius","topRadius","paperSize","paperPosition","min","print","svgViewBox","boxHeight","topLip","xmlns","xmlnsXlink","viewBox","lookUpAngle","r","lookUpAngle2","r2","acos","lookUpRadius","angle","InsideFoldsSvg","basePolyRadius","topPolyRadius","creaseAngle","innerAngleToC","highlight","color","redStartPoint","redDir","X","redLine","t","times","redEndpoint","shape","constructor","this","angleForDistance","distance","quarterCount","floor","quarterRest","alpha","radiusForAngle","_shape","console","log","_squarcle","line","s","shapeAngle","shapeRadius","shapeCenter","canvasRef","useRef","theme","useEffect","canvas","current","devicePixelRatio","offsetHeight","offsetWidth","context","colors","lineWidth","scale","translate","lastTime","stop","lastPoints","requestAnimationFrame","paint","highResTimeStamp","newPoints","newPoint","lastPoint","distanceTo","beginPath","strokeStyle","moveTo","lineTo","startAnim","getContext","palette","primary","main","secondary","container","minHeight","item","xs","ref"],"sourceRoot":""}