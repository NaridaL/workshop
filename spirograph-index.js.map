{"version":3,"file":"spirograph-index.js","mappings":"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","sources":["/dev/workshop/./src/paperBox1/Measure.tsx?","/dev/workshop/./src/paperBox1/MeasureAngle.tsx?","/dev/workshop/./src/paperBox1/common.tsx?","/dev/workshop/./src/paperBox2/Common.tsx?","/dev/workshop/./src/paperBox2/InsideFolds.tsx?","/dev/workshop/./src/spirograph/index.tsx?"],"sourcesContent":["import * as React from \"react\"\nimport { createContext, useContext } from \"react\"\nimport { DEG, round10, V, } from \"ts3dutils\"\n\n\nexport const SvgPrintContext = createContext(false)\n\nexport function Measure({\n  from,\n  to,\n  children,\n  hideRight = false,\n  offset = 0,\n}\n\n\n\n\n\n) {\n  Array.isArray(from) && (from = V(from))\n  Array.isArray(to) && (to = V(to))\n  const d = from.to(to)\n  const length = d.length()\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  if (length < 0.05) return null\n  children ||= \"\" + round10(length, -1)\n  const textBlank = 3 * children.length\n\n  return (\n    React.createElement('g', {\n      transform: ` translate(${from[0]}, ${from[1]}) rotate(${\n        d.angleXY() / DEG\n      }) translate(0, ${offset * 10})`,\n      style: { stroke: \"#aaa\" },}\n\n      , !hideRight && (\n        React.createElement('path', {\n          d: `M0,0\n          l0,10\n          M4,3\n          l-4,2\n          l4,2`,}\n        )\n      )\n      , React.createElement('path', {\n        d: `\n        M0,5\n        H${(length - textBlank) / 2}\n        M${(length + textBlank) / 2},5\n        H${length}\n        M${length},0\n        l0,10\n        m-4,-7\n        l4,2\n        l-4,2`,}\n      )\n      , React.createElement('text', {\n        style: {\n          stroke: \"none\",\n          fill: \"#aaa\",\n          fontSize: 4,\n          dominantBaseline: \"middle\",\n          textAnchor: \"middle\",\n        },\n        x: length / 2,\n        y: 5,}\n\n        , children\n      )\n    )\n  )\n}\n"," function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }import * as React from \"react\"\nimport { useContext } from \"react\"\nimport { V, V3 } from \"ts3dutils\"\nimport { fmtdeg, } from \"./common\"\nimport { SvgPrintContext } from \"./Measure\"\n\nexport function MeasureAngle({\n  center,\n  start,\n  toRel,\n  children,\n}\n\n\n\n\n) {\n  Array.isArray(center) && (center = V(center))\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  const radius = 20\n  const startV = V3.polar(radius, start).plus(V(center))\n  const endV = V3.polar(radius, start + toRel).plus(V(center))\n  const textPos = V3.polar(0.7 * radius, start + toRel / 2).plus(V(center))\n  const largeArcFlag = Math.abs(toRel) > Math.PI ? \"1\" : \"0\"\n  const sweepFlag = toRel > 0 ? \"1\" : \"0\"\n  return (\n    React.createElement('g', null\n      , React.createElement('path', {\n        d: `M${startV.x},${startV.y} A${radius},${radius},0,${largeArcFlag},${sweepFlag},${endV.x},${endV.y}`,}\n      )\n      , React.createElement('text', {\n        style: {\n          stroke: \"none\",\n          fill: \"#aaa\",\n          fontSize: 4,\n          dominantBaseline: \"middle\",\n          textAnchor: \"middle\",\n        },\n        x: textPos.x,\n        y: textPos.y,}\n\n        , _nullishCoalesce(children, () => ( fmtdeg(toRel)))\n      )\n    )\n  )\n}\n"," function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }import * as React from \"react\"\n\nimport { arrayRange, DEG, MINUS, round10, TAU, V3 } from \"ts3dutils\"\n\nexport const INCH = 25.4\nexport const fmtdeg = (x) => \"\" + round10(x / DEG, -1) + \"Â°\"\n \n\nexport const radiusFromSideWidth = (sides, sideWidth) =>\n  sideWidth / 2 / Math.sin(TAU / sides / 2)\nexport const sideWithFromRadius = (sides, radius) =>\n  radius * 2 * Math.sin(TAU / sides / 2)\nexport const centerToSideFromSideWidth = (\n  sides,\n  sideWidth,\n) => sideWidth / 2 / Math.tan(TAU / sides / 2)\nexport const radiusFromCenterToSide = (\n  sides,\n  centerToSide,\n) => centerToSide / Math.cos(TAU / sides / 2)\nexport const sideWidthFromCenterToSide = (\n  sides,\n  centerToSide,\n) => centerToSide * 2 * Math.tan(TAU / sides / 2)\n\nexport function RegularPolygon({\n  sides,\n  radius,\n  startAngle = 0,\n  sideLength = undefined,\n  ...props\n}\n\n\n\n\n) {\n  if ((undefined !== sideLength) === (undefined !== radius)) {\n    throw new Error(\"must set either sideLength or radius\")\n  }\n  if (undefined === radius) {\n    radius = radiusFromSideWidth(sides, sideLength)\n  }\n  const { x, y } = V3.polar(radius, startAngle)\n  return (\n    React.createElement('path', {\n      d: dTpl`\n        M${x},${y}\n        ${arrayRange(0, sides).map(\n          (i) => dTpl`L${V3.polar(radius, startAngle + i * (TAU / sides))}`,\n        )}Z`,\n      ...props,}\n    )\n  )\n}\n\nexport function RotStep({\n  id,\n  children,\n  count,\n  stepDeg,\n}\n\n\n\n\n) {\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('g', { id: id,}, children)\n      , arrayRange(0, count - 1).map((i) => (\n        React.createElement('use', {\n          key: i,\n          xlinkHref: \"#\" + id,\n          transform: `rotate(${(i + 1) * stepDeg} 0 0)`,}\n        )\n      ))\n    )\n  )\n}\n\n \n// Always portrait orientation,\nexport const PAPER_SIZES = [\n  [841, 1189, \"A0\"],\n  [594, 841, \"A1\"],\n  [420, 594, \"A2\"],\n  [297, 420, \"A3\"],\n  [210, 297, \"A4\"],\n  [148, 210, \"A5\"],\n  [105, 148, \"A6\"],\n  [74, 105, \"A7\"],\n  [52, 74, \"A8\"],\n  [37, 52, \"A9\"],\n  [26, 37, \"A10\"],\n  [150, 150, \"Origami 15cm\"],\n  [100, 100, \"Origami 10cm\"],\n  [75, 75, \"Origami 7.5cm\"],\n  [215.9, 279.4, \"Letter\"],\n  [215.9, 355.6, \"Legal\"],\n]\n\nexport function PaperSizeFromString(str) {\n  const byName = PAPER_SIZES.find(([, , name]) => name === str)\n  if (byName) return byName\n  const [a, b] = str.split(\"x\")\n  return [+a, +b, \"Custom\"]\n}\nexport function PaperSizeFromDimensions(a, b) {\n  ;[a, b] = [a, b].sort(MINUS)\n  return _nullishCoalesce(PAPER_SIZES.find(([x, y]) => x === a && y === b), () => ( [a, b, \"Custom\"]))\n}\nexport function PaperSizeToString([a, b, name]) {\n  return name === \"Custom\" ? \"\" + a + \"x\" + b : name\n}\n\nexport const PAPER_SIZE_A4 = PAPER_SIZES.find(([, , name]) => name === \"A4\")\n\nexport function dTpl(\n  strings,\n  ...exps\n) {\n  const format = (x) =>\n    \"number\" === typeof x\n      ? \"\" + x\n      : \"string\" === typeof x\n      ? x\n      : Array.isArray(x)\n      ? x.map(format).join(\" \")\n      : x.x + \",\" + x.y\n  let result = strings[0]\n  for (let i = 0; i < exps.length; i++) {\n    result += format(exps[i])\n    result += strings[i + 1]\n  }\n  return result\n}\n\nexport const openInNewTab = (url) => {\n  const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  if (newWindow) newWindow.opener = null\n}\n","import * as React from \"react\"\nimport { useContext } from \"react\"\nimport { V } from \"ts3dutils\"\n\nimport { dTpl, INCH, } from \"../paperBox1/common\"\nimport { Measure, SvgPrintContext } from \"../paperBox1/Measure\"\n\n// https://math.stackexchange.com/a/885965/230980\nexport function lookUpAngle(\n  r,\n  lookUpAngle2,\n  r2,\n) {\n  return (\n    Math.PI / 2 - lookUpAngle2 - Math.acos((r2 / r) * Math.sin(lookUpAngle2))\n  )\n}\n\nexport function Common({\n  baseRadius,\n  topRadius,\n  radius,\n  style,\n  paperSize,\n  children,\n}\n\n\n\n\n\n\n) {\n  const paperPosition = paperSize && [\n    Math.min(-20, radius - paperSize[0]),\n    Math.min(-20, radius - paperSize[1]),\n  ]\n  const print = useContext(SvgPrintContext)\n  const svgViewBox = !print\n    ? [-radius - 10, -radius - 10, radius * 2 + 20, radius * 2 + 20]\n    : paperSize\n    ? [paperPosition[0], paperPosition[1], paperSize[0], paperSize[1]]\n    : [-radius, -radius, radius * 2, radius * 2]\n\n  const boxHeight = topRadius - baseRadius\n  const topLip = radius - topRadius\n  return (\n    React.createElement('svg', {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n      style: {\n        fill: \"none\",\n        stroke: \"#123456\",\n        strokeWidth: (2 * INCH) / 300,\n        ...style,\n      },\n      width: svgViewBox[2] + \"mm\",\n      height: svgViewBox[3] + \"mm\",\n      viewBox: svgViewBox.join(\" \"),\n      className: \"adrian\",}\n\n      , React.createElement('style', null\n        , \".valley {stroke-dasharray: 1,1;}\"\n        , \".outline {stroke-dasharray: .1,1;}\"\n        , \".mountain {stroke-dasharray: 10,2,1,1,1,2;}\"\n      )\n      , !print && (\n        React.createElement('g', { transform: \"translate(-20 -20) rotate(180)\"  ,}\n          , React.createElement('path', {\n            d: dTpl`\n          M${V(baseRadius - topLip, boxHeight * 0.99)}\n          L${V(baseRadius, boxHeight)}\n          L${V(baseRadius, 0)}\n          L${V(-baseRadius, 0)}\n          L${V(-baseRadius, boxHeight)}\n          L${V(topLip - baseRadius, boxHeight * 1.01)}\n          `,}\n          )\n          , React.createElement(Measure, { from: V(baseRadius, 0), to: V(-baseRadius, 0),} )\n          , React.createElement(Measure, { from: V(baseRadius, boxHeight), to: V(baseRadius, 0),} )\n          , React.createElement(Measure, {\n            from: V(topLip - baseRadius, boxHeight),\n            to: V(0, boxHeight),}\n          )\n        )\n      )\n\n      , !print && paperSize && (\n        React.createElement('rect', {\n          x: paperPosition[0],\n          y: paperPosition[1],\n          width: paperSize[0],\n          height: paperSize[1],}\n        )\n      )\n      , children\n    )\n  )\n}\n","import * as React from \"react\"\nimport { useContext } from \"react\"\nimport { newtonIterate1d, TAU, V, V3 } from \"ts3dutils\"\n\nimport {\n  dTpl,\n\n  radiusFromCenterToSide,\n  RegularPolygon,\n  RotStep,\n} from \"../paperBox1/common\"\nimport { Measure, SvgPrintContext } from \"../paperBox1/Measure\"\nimport { MeasureAngle } from \"../paperBox1/MeasureAngle\"\nimport { Common } from \"./Common\"\n\n// https://math.stackexchange.com/a/885965/230980\nexport function lookUpAngle(\n  r,\n  lookUpAngle2,\n  r2,\n) {\n  return (\n    Math.PI / 2 - lookUpAngle2 - Math.acos((r2 / r) * Math.sin(lookUpAngle2))\n  )\n}\nexport function lookUpRadius(\n  angle,\n  lookUpAngle2,\n  r2,\n) {\n  return (\n    r2 / Math.cos(angle - Math.PI / 2 + lookUpAngle2) / Math.sin(lookUpAngle2)\n  )\n}\n\nexport function InsideFolds(props\n\n\n\n\n\n\n) {\n  const { baseRadius, topRadius, radius, sides } = props\n  const basePolyRadius = radiusFromCenterToSide(sides, baseRadius)\n  const topPolyRadius = radiusFromCenterToSide(sides, topRadius)\n\n  const creaseAngle = TAU / sides / 2\n  const innerAngleToC = lookUpAngle(radius, creaseAngle, basePolyRadius)\n  const print = useContext(SvgPrintContext)\n  function highlight(color) {\n    // The colors mainly serve to make the code more readable, i.e. you know\n    // which code makes which line. When printing, no colors.\n    return print ? {} : { stroke: color }\n  }\n\n  const redStartPoint = V(basePolyRadius, 0).plus(\n    V3.polar(topRadius - baseRadius, creaseAngle),\n  )\n  const redDir = V3.X\n  const redLine = (t) => redStartPoint.plus(redDir.times(t))\n  const redEndpoint = redLine(\n    newtonIterate1d((t) => redLine(t).length() - radius, 1, 4),\n  )\n  return (\n    React.createElement(Common, { ...props,}\n      , React.createElement('g', { className: \"fold\",}\n        , React.createElement(RegularPolygon, {\n          radius: basePolyRadius,\n          sides: sides,\n          className: \"valley\",}\n        )\n        , React.createElement(Measure, {\n          offset: -0.5,\n          from: [0, 0],\n          to: V3.polar(baseRadius, creaseAngle),}\n, \"baseRadius\"\n\n        )\n        , React.createElement(Measure, {\n          offset: -0.5,\n          from: V3.polar(baseRadius, creaseAngle),\n          to: V3.polar(topRadius, creaseAngle),\n          hideRight: true,}\n, \"topRadius\"\n\n        )\n        , React.createElement(Measure, {\n          offset: -0.5,\n          from: V3.polar(topRadius, creaseAngle),\n          to: V3.polar(radius, creaseAngle),\n          hideRight: true,}\n, \"radius\"\n\n        )\n        , React.createElement(MeasureAngle, {\n          center: redStartPoint,\n          start: Math.PI,\n          toRel: creaseAngle,}\n        )\n        , React.createElement(Measure, {\n          from: V3.polar(basePolyRadius, -TAU / sides),\n          to: V3.polar(basePolyRadius, 0),}\n        )\n        , React.createElement(RotStep, { id: \"foo\", count: sides, stepDeg: 360 / sides,}\n          , React.createElement('path', {\n            d: dTpl`\n                M${basePolyRadius},0\n                H${radius}`,\n            className: \"mountain\",\n            style: highlight(\"green\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${basePolyRadius},0\n                L${V3.polar(radius, innerAngleToC)}\n                M${basePolyRadius},0\n                L${redStartPoint}`,\n            className: \"valley\",\n            style: highlight(\"blue\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${redStartPoint}\n                L${V3.polar(radius, -innerAngleToC)}`,\n            className: \"mountain\",\n            style: highlight(\"blue\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${topPolyRadius},0\n                L${V3.polar(basePolyRadius, -TAU / sides).plus(\n                  V3.polar(topRadius - baseRadius, -TAU / sides / 2),\n                )}`,\n            className: \"valley\",\n            style: highlight(\"hotpink\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${V3.polar(basePolyRadius, -TAU / sides).plus(\n                  V3.polar(topRadius - baseRadius, -TAU / sides / 2),\n                )}\n                L${V3.polar(topPolyRadius, -TAU / sides)}`,\n            className: \"mountain\",\n            style: highlight(\"orange\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${redStartPoint}\n                L${redEndpoint}`,\n            className: \"valley\",\n            style: highlight(\"red\"),}\n          )\n        )\n      )\n      , React.createElement('g', { className: \"cut\",}\n        , React.createElement('circle', { r: radius,} )\n      )\n    )\n  )\n}\n","import Grid from \"@mui/material/Grid\"\nimport { useTheme } from \"@mui/material/styles\"\nimport * as React from \"react\"\nimport { useEffect, useRef } from \"react\"\nimport { DEG, PI, V, V3 } from \"ts3dutils\"\nimport { lookUpAngle, lookUpRadius } from \"../paperBox2/InsideFolds\"\n\nclass Circle {\n  constructor(  radius) {;this.radius = radius;}\n\n  angleForDistance(distance) {\n    return distance / this.radius\n  }\n\n  radiusForAngle(angle) {\n    return this.radius\n  }\n}\nfunction _circle(radius) {\n  return function (x) {\n    const angle = x / radius\n    return [V3.polar(radius, angle), V3.polar(1, angle + PI / 2)]\n  }\n}\nfunction _squarcle(radius, d) {\n  const alpha = lookUpAngle(radius, 45 * DEG, d)\n  const sideLength = alpha * 2 * radius\n  console.log(sideLength, alpha / DEG)\n  return function (x) {\n    const quarterCount = Math.floor(x / sideLength)\n    let quarterRest = x % sideLength\n    if (quarterRest > sideLength / 2) quarterRest -= sideLength\n    return [\n      // M4.rotateZ(quarterCount * (Math.PI / 2)).transformVector(\n      V(d - radius, 0).plus(V3.polar(radius, quarterRest / radius)),\n      // ),\n    ]\n  }\n}\n\nclass Squarcle {\n  constructor(\n    /**\n     * side of the side curvature\n     */\n      radius,\n    /**\n     * Distance center to closest point on side\n     */\n      d,\n  ) {;this.radius = radius;this.d = d;}\n\n  sideLength() {\n    const alpha = lookUpAngle(this.radius, 45 * DEG, this.d)\n    return alpha * 2 * this.radius\n  }\n\n  angleForDistance(distance) {\n    const sideLength = this.sideLength()\n    const quarterCount = Math.floor(distance / sideLength)\n    let quarterRest = distance % sideLength\n    if (quarterRest > sideLength / 2) quarterRest -= sideLength\n    const alpha = quarterRest / this.radius\n\n    return (quarterCount * PI) / 2 + alpha\n  }\n\n  radiusForAngle(angle) {\n    angle = angle % (PI / 2)\n    if (angle > PI / 4) angle = angle - PI / 2\n    return lookUpRadius(angle, 45 * DEG, this.d)\n  }\n}\n\n// const shape = new Circle(1 / 3.14)\nconst shape = new Squarcle(0.5, 0.4)\n// const _shape = _circle(2)\nconst _shape = _squarcle(2, 1.8)\n\nfunction line(s) {\n  const outerRadius = 1.5\n  const shapeAngle = shape.angleForDistance(s * outerRadius)\n  const shapeRadius = shape.radiusForAngle(s / outerRadius)\n  const shapeCenter = V3.polar(outerRadius - shapeRadius, s)\n  return [\n    //\n    // V3.polar(outerRadius, Math.min(s, TAU)),\n    // shapeCenter,\n    _shape(s)[0],\n    // V3.polar(shapeRadius, shapeAngle),\n    // shapeCenter.plus(V3.polar(0.2, shapeAngle)),\n    shapeCenter.plus(V3.polar(-0.2, shapeAngle)),\n    // shapeCenter.plus(V3.polar(0.2, innerCircleAngle)),\n    // shapeCenter.plus(V3.polar(0.4, innerCircleAngle + TAU / 3)),\n    // shapeCenter.plus(V3.polar(0.4, innerCircleAngle + (2 * TAU) / 3)),\n  ]\n}\n\nfunction startAnim(context, colors) {\n  // context.rect(100, 100, 100, 100)\n  context.lineWidth = 0.005\n  const scale = Math.min(context.canvas.width, context.canvas.height)\n  context.scale(scale, scale)\n  context.translate(0.5, 0.5)\n  context.scale(0.25, 0.25)\n  let lastTime = 0\n  let stop = false\n  const lastPoints = line(0)\n\n  function paint(highResTimeStamp) {\n    for (; lastTime < highResTimeStamp; lastTime += 1) {\n      const s = lastTime / 1000.0\n      const newPoints = line(s)\n\n      for (let i = 0; i < lastPoints.length; i++) {\n        const newPoint = newPoints[i]\n        const lastPoint = lastPoints[i]\n        if (lastPoint.distanceTo(newPoint) > 0.0001) {\n          context.beginPath()\n          context.strokeStyle = colors[i]\n          context.moveTo(lastPoint.x, lastPoint.y)\n          context.lineTo(newPoint.x, newPoint.y)\n          context.stroke()\n          lastPoints[i] = newPoint\n        }\n      }\n    }\n    !stop && requestAnimationFrame(paint)\n  }\n\n  requestAnimationFrame(paint)\n  return () => {\n    stop = true\n  }\n}\n\nexport default function () {\n  const canvasRef = useRef(null)\n\n  const theme = useTheme()\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    canvas.height = devicePixelRatio * canvas.offsetHeight\n    canvas.width = devicePixelRatio * canvas.offsetWidth\n    const context = canvas.getContext(\"2d\")\n    return startAnim(context, [\n      theme.palette.primary.main,\n      theme.palette.secondary.main,\n      \"red\",\n      \"blue\",\n      \"black\",\n    ])\n  }, [theme.palette])\n  return (\n    React.createElement(Grid, { container: true, style: { minHeight: \"100vh\" },}\n      , React.createElement(Grid, { item: true, xs: 12,}\n        , React.createElement('canvas', { ref: canvasRef, style: { width: \"100%\", height: \"100%\" },} )\n      )\n    )\n  )\n}\n"],"names":["SvgPrintContext","createContext","Measure","from","to","children","hideRight","offset","Array","isArray","V","d","length","useContext","textBlank","transform","angleXY","style","stroke","fill","fontSize","dominantBaseline","textAnchor","x","y","MeasureAngle","center","start","toRel","startV","V3","polar","plus","endV","textPos","largeArcFlag","Math","abs","PI","sweepFlag","lhs","rhsFn","INCH","fmtdeg","radiusFromSideWidth","sides","sideWidth","sin","sideWithFromRadius","radius","centerToSideFromSideWidth","tan","radiusFromCenterToSide","centerToSide","cos","sideWidthFromCenterToSide","RegularPolygon","startAngle","sideLength","props","undefined","Error","dTpl","map","i","RotStep","id","count","stepDeg","key","xlinkHref","PAPER_SIZES","PaperSizeFromString","str","byName","find","name","a","b","split","PaperSizeFromDimensions","sort","PaperSizeToString","PAPER_SIZE_A4","strings","exps","format","join","result","openInNewTab","url","newWindow","window","open","opener","Common","baseRadius","topRadius","paperSize","paperPosition","min","print","svgViewBox","boxHeight","topLip","xmlns","xmlnsXlink","strokeWidth","width","height","viewBox","className","lookUpAngle","r","lookUpAngle2","r2","acos","lookUpRadius","angle","InsideFolds","basePolyRadius","topPolyRadius","creaseAngle","innerAngleToC","highlight","color","redStartPoint","redDir","X","redLine","t","times","redEndpoint","shape","constructor","this","angleForDistance","distance","quarterCount","floor","quarterRest","alpha","radiusForAngle","_shape","console","log","_squarcle","line","s","shapeAngle","shapeRadius","shapeCenter","canvasRef","useRef","theme","useEffect","canvas","current","devicePixelRatio","offsetHeight","offsetWidth","context","colors","lineWidth","scale","translate","lastTime","stop","lastPoints","requestAnimationFrame","paint","highResTimeStamp","newPoints","newPoint","lastPoint","distanceTo","beginPath","strokeStyle","moveTo","lineTo","startAnim","getContext","palette","primary","main","secondary","container","minHeight","item","xs","ref"],"sourceRoot":""}