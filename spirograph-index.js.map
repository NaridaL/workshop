{"version":3,"file":"spirograph-index.js","mappings":"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","sources":["/dev/workshop/./src/common/useHashState.ts?","/dev/workshop/./src/paperBox1/ExportButtons.tsx?","/dev/workshop/./src/paperBox1/Measure.tsx?","/dev/workshop/./src/paperBox1/PaperSize.tsx?","/dev/workshop/./src/paperBox1/SvgCommonDefs.tsx?","/dev/workshop/./src/paperBox1/common.tsx?","/dev/workshop/./src/paperBox1/svg.ts?","/dev/workshop/./src/raymarch/OrbitCameraController.ts?","/dev/workshop/./src/spirograph/index.tsx?"],"sourcesContent":[" function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }import debounce from \"lodash/debounce\"\nimport mapValues from \"lodash/mapValues\"\nimport { useCallback, useEffect, useRef, useState } from \"react\"\nimport {\n  PAPER_SIZE_A4,\n\n  PaperSizeFromString,\n  PaperSizeToString,\n} from \"../paperBox1/PaperSize\"\n\nconst parseHash = (hash) => {\n  return !hash\n    ? {}\n    : hash\n        .substring(1)\n        .split(\"&\")\n        .map((part) => {\n          const [key, value] = part.split(\"=\")\n          return [decodeURIComponent(key), decodeURIComponent(value)]\n        })\n        .reduce((obj, [key, value]) => {\n          obj[key] = value\n          return obj\n        }, {} )\n}\nconst objectToHash = (o) => {\n  return (\n    \"#\" +\n    Object.entries(o)\n      .map(\n        ([key, value]) =>\n          encodeURIComponent(key) + \"=\" + encodeURIComponent(value),\n      )\n      .join(\"&\")\n  )\n}\n\nconst defaultDeserialize = (\n  x,\n) =>\n  mapValues(x, (v, key) => {\n    if (\"paperSize\" === key) {\n      try {\n        return PaperSizeFromString(v)\n      } catch (e) {\n        console.error(e)\n        return PAPER_SIZE_A4\n      }\n    } else if (\"true\" === v) {\n      return true\n    } else if (\"false\" === v) {\n      return false\n    } else if (\"NaN\" === v) {\n      return NaN\n    } else if (\"undefined\" === v) {\n      return undefined\n    } else if (\"null\" === v) {\n      return null\n    } else if (\"\" === v) {\n      return \"\"\n    } else if (!isNaN(+v)) {\n      return +v\n    } else {\n      return v\n    }\n  })\nconst defaultSerialize = (x) =>\n  mapValues(x, (v, key) =>\n    key === \"paperSize\" ? PaperSizeToString(v ) : \"\" + v,\n  )\n\nexport function useHashState(\n  initialState,\n  {\n    deserialize = defaultDeserialize,\n    serialize = defaultSerialize,\n    wait = 1000,\n  } = {},\n) {\n  const createInitialState = useCallback(() => {\n    const state =\n      \"function\" === typeof initialState\n        ? (initialState )()\n        : initialState\n    // hash overrides parameter\n    const mergedState = deserialize(\n      Object.assign(serialize(state), parseHash(document.location.hash)),\n    ) \n    console.log(\"replaceState\")\n    history.replaceState(\n      undefined,\n      document.title,\n      objectToHash(serialize(mergedState)),\n    )\n\n    return mergedState\n  }, [deserialize, initialState, serialize])\n  const [state, setState] = useState(createInitialState)\n  const updateHashRef = useRef()\n  useEffect(() => _optionalChain([updateHashRef, 'access', _ => _.current, 'optionalCall', _2 => _2(state)]), [state])\n  if (!updateHashRef.current) {\n    console.log(\"pushState\")\n    updateHashRef.current = debounce(function (newState) {\n      history.pushState(\n        undefined,\n        document.title,\n        objectToHash(serialize(newState)),\n      )\n    }, wait)\n  }\n\n  useEffect(() => {\n    const onHashChange = () => {\n      setState(createInitialState())\n    }\n    window.addEventListener(\"hashchange\", onHashChange)\n    return () => {\n      window.removeEventListener(\"hashchange\", onHashChange)\n    }\n  }, [createInitialState])\n  return [state, setState]\n}\n","import Button from \"@mui/material/Button\"\nimport fileDownload from \"js-file-download\"\n\nimport * as React from \"react\"\nimport ReactDOMServer from \"react-dom/server\"\nimport { SvgPrintContext } from \"./Measure\"\n\nexport function ExportButtons({\n  what,\n  baseFileName,\n}\n\n\n) {\n  const getPrintSVG = () =>\n    ReactDOMServer.renderToStaticMarkup(\n      React.createElement(SvgPrintContext.Provider, { value: true,}, what),\n    ).replace(/\\s{2,}/g, \" \")\n  const asSVG = () => {\n    const svg = getPrintSVG()\n    fileDownload(svg, baseFileName + \".svg\")\n  }\n  const asTemplatePDF = async () => {\n    const { svgToPdf } = await import(\n      /* webpackChunkName: \"svgToPdf\" */ \"../paperBox1/svgToPdf\"\n    )\n\n    // add your content to the document here, as usual\n    const blob = await svgToPdf({\n      title: baseFileName,\n      author: \"Adrian Leonhard\",\n      svg: getPrintSVG(),\n    })\n\n    fileDownload(blob, baseFileName + \".pdf\")\n  }\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Button, { variant: \"contained\", onClick: asSVG,}, \"Download As SVG\"\n\n      )\n      , React.createElement(Button, { variant: \"contained\", onClick: asTemplatePDF,}, \"Template as PDF\"\n\n      )\n    )\n  )\n}\n","import * as React from \"react\"\nimport { createContext, useContext } from \"react\"\nimport { DEG, round10, V, } from \"ts3dutils\"\n\n\nexport const SvgPrintContext = createContext(false)\n\nexport function Guide({\n  children,\n  ...props\n}) {\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  return (\n    React.createElement('g', { className: \"guide\", ...props,}\n      , children\n    )\n  )\n}\nexport function Measure({\n  from,\n  to,\n  children,\n  hideRight = false,\n  offset = 0,\n}\n\n\n\n\n\n) {\n  Array.isArray(from) && (from = V(from))\n  Array.isArray(to) && (to = V(to))\n  const d = from.to(to)\n  const length = d.length()\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  if (length < 0.05) return null\n  children ||= \"\" + round10(length, -1)\n  const textBlank = 3 * children.length\n\n  return (\n    React.createElement('g', {\n      transform: ` translate(${from[0]}, ${from[1]}) rotate(${\n        d.angleXY() / DEG\n      }) translate(0, ${offset * 10})`,\n      className: \"measure\",}\n\n      , !hideRight && (\n        React.createElement('path', {\n          style: { fill: \"none\" },\n          d: `M0,0\n          l0,10\n          M4,3\n          l-4,2\n          l4,2`,}\n        )\n      )\n      , React.createElement('path', {\n        style: { fill: \"none\" },\n        d: `\n        M0,5\n        H${(length - textBlank) / 2}\n        M${(length + textBlank) / 2},5\n        H${length}\n        M${length},0\n        l0,10\n        m-4,-7\n        l4,2\n        l-4,2`,}\n      )\n      , React.createElement('text', {\n        style: {\n          stroke: \"none\",\n          fontSize: 4,\n          dominantBaseline: \"middle\",\n          textAnchor: \"middle\",\n        },\n        x: length / 2,\n        y: 5,}\n\n        , children\n      )\n    )\n  )\n}\n"," function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }import { MINUS } from \"ts3dutils\"\n\n \n// Always portrait orientation,\n\n// Always portrait orientation,\nexport const PAPER_SIZES_A = [\n  [841, 1189, \"A0\"],\n  [594, 841, \"A1\"],\n  [420, 594, \"A2\"],\n  [297, 420, \"A3\"],\n  [210, 297, \"A4\"],\n  [148, 210, \"A5\"],\n  [105, 148, \"A6\"],\n  [74, 105, \"A7\"],\n  [52, 74, \"A8\"],\n  [37, 52, \"A9\"],\n  [26, 37, \"A10\"],\n]\n\nexport function PaperSizeEquals([aw, ah], [bw, bh]) {\n  return aw === bw && bh === bw\n}\n\nexport const PAPER_SIZES_B = [\n  [1000, 1414, \"C0\"],\n  [707, 1000, \"C1\"],\n  [500, 707, \"C2\"],\n  [353, 500, \"C3\"],\n  [250, 353, \"C4\"],\n  [176, 250, \"C5\"],\n  [125, 176, \"C6\"],\n  [88, 125, \"C7\"],\n  [62, 88, \"C8\"],\n  [44, 62, \"C9\"],\n  [31, 44, \"C10\"],\n]\n\n// C size envelopes fit A size paper.\nexport const PAPER_SIZES_C = [\n  [917, 1297, \"C0\"],\n  [648, 917, \"C1\"],\n  [458, 648, \"C2\"],\n  [324, 458, \"C3\"],\n  [229, 324, \"C4\"],\n  [162, 229, \"C5\"],\n  [114, 162, \"C6\"],\n  [81, 114, \"C7\"],\n  [57, 81, \"C8\"],\n  [40, 57, \"C9\"],\n  [28, 40, \"C10\"],\n]\nexport const PAPER_SIZES = [\n  ...PAPER_SIZES_A,\n  [150, 150, \"Origami 15cm\"],\n  [100, 100, \"Origami 10cm\"],\n  [75, 75, \"Origami 7.5cm\"],\n  [215.9, 279.4, \"Letter\"],\n  [215.9, 355.6, \"Legal\"],\n]\n\nexport const ALL_PAPER_SIZES = [\n  ...PAPER_SIZES,\n  ...PAPER_SIZES_C,\n  ...PAPER_SIZES_B,\n]\n\nexport function PaperSizeFromString(str) {\n  const byName = PAPER_SIZES.find(([, , name]) => name === str)\n  if (byName) return byName\n  const [a, b] = str.split(\"x\")\n  return [+a, +b, \"Custom\"]\n}\nexport function PaperSizeFromDimensions(a, b) {\n  ;[a, b] = [a, b].sort(MINUS)\n  return _nullishCoalesce(PAPER_SIZES.find(([x, y]) => x === a && y === b), () => ( [a, b, \"Custom\"]))\n}\nexport function PaperSizeToString([a, b, name]) {\n  return name === \"Custom\" ? \"\" + a + \"x\" + b : name\n}\n\nexport const PAPER_SIZE_A4 = PAPER_SIZES_A[4]\n","\nimport { blue, green, orange, pink, red } from \"@mui/material/colors\"\nimport { useTheme } from \"@mui/material/styles\"\nimport * as React from \"react\"\nimport { useContext, useMemo } from \"react\"\nimport { SvgPrintContext } from \"./Measure\"\n\n\nexport const SvgCommonDefs = () => {\n  const theme = useTheme()\n  const print = useContext(SvgPrintContext)\n  const screenStyles = useMemo(\n    () => `\n.adrian * { stroke: ${theme.palette.text.primary}; }\n.adrian .red-stroke { stroke: ${red[500]}; }\n.adrian .orange-stroke { stroke: ${orange[500]}; }\n.adrian .blue-stroke { stroke: ${blue[500]}; }\n.adrian .green-stroke { stroke: ${green[500]}; }\n.adrian .pink-stroke { stroke: ${pink[500]}; }\n.adrian .measure, *.measure * {\n  stroke: ${theme.palette.primary.main};\n  fill: ${theme.palette.primary.main};\n}\n.adrian .guide, .adrian .guide * {\n  stroke: ${theme.palette.secondary.main};\n  fill: ${theme.palette.secondary.main};\n}\n.adrian .glue, .adrian .guide .glue {\n  stroke: none;\n  fill: url(#glue);\n}\n`,\n    [theme],\n  )\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('defs', null\n        , React.createElement('pattern', { id: \"glue\", patternUnits: \"userSpaceOnUse\", width: \"4\", height: \"4\",}\n          , React.createElement('path', {\n            d: \"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2\"\n\n                ,\n            style: { stroke: theme.palette.divider, strokeWidth: 1 },}\n          )\n        )\n      )\n      , React.createElement('style', null, `\n      .mountain, .mountain * { stroke-dasharray: 10,2,1,1,1,2; }\n      .valley, .valley * { stroke-dasharray: 1,1; }\n      .cut, .cut * { stroke: 1; }\n      `)\n      , !print && React.createElement('style', null, screenStyles)\n    )\n  )\n}\n","import * as React from \"react\"\n\nimport { arrayRange, DEG, round10, TAU, V3 } from \"ts3dutils\"\n\nexport const INCH = 25.4\nexport const fmtdeg = (x) => \"\" + round10(x / DEG, -1) + \"Â°\"\n \n\nexport const radiusFromSideWidth = (sides, sideWidth) =>\n  sideWidth / 2 / Math.sin(TAU / sides / 2)\nexport const sideWithFromRadius = (sides, radius) =>\n  radius * 2 * Math.sin(TAU / sides / 2)\nexport const centerToSideFromSideWidth = (\n  sides,\n  sideWidth,\n) => sideWidth / 2 / Math.tan(TAU / sides / 2)\nexport const radiusFromCenterToSide = (\n  sides,\n  centerToSide,\n) => centerToSide / Math.cos(TAU / sides / 2)\nexport const sideWidthFromCenterToSide = (\n  sides,\n  centerToSide,\n) => centerToSide * 2 * Math.tan(TAU / sides / 2)\n\nexport function RegularPolygon({\n  sides,\n  radius,\n  startAngle = 0,\n  sideLength = undefined,\n  ...props\n}\n\n\n\n\n) {\n  if ((undefined !== sideLength) === (undefined !== radius)) {\n    throw new Error(\"must set either sideLength or radius\")\n  }\n  if (undefined === radius) {\n    radius = radiusFromSideWidth(sides, sideLength)\n  }\n  const { x, y } = V3.polar(radius, startAngle)\n  return (\n    React.createElement('path', {\n      d: dTpl`\n        M${x},${y}\n        ${arrayRange(0, sides).map(\n          (i) => dTpl`L${V3.polar(radius, startAngle + i * (TAU / sides))}`,\n        )}Z`,\n      ...props,}\n    )\n  )\n}\n\nexport function RotStep({\n  id,\n  children,\n  count,\n  stepDeg,\n}\n\n\n\n\n) {\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('g', { id: id,}, children)\n      , arrayRange(0, count - 1).map((i) => (\n        React.createElement('g', {\n          id: `${id}-${i}`,\n          key: `${id}-${i}`,\n          transform: `rotate(${(i + 1) * stepDeg} 0 0)`,}\n\n          , children\n        )\n      ))\n    )\n  )\n}\n\nexport function dTpl(\n  strings,\n  ...exps\n) {\n  const format = (x) =>\n    \"number\" === typeof x\n      ? \"\" + x\n      : \"string\" === typeof x\n      ? x\n      : Array.isArray(x)\n      ? x.map(format).join(\" \")\n      : x.x + \",\" + x.y\n  let result = strings[0]\n  for (let i = 0; i < exps.length; i++) {\n    result += format(exps[i])\n    result += strings[i + 1]\n  }\n  return result\n}\n\nexport const openInNewTab = (url) => {\n  const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  if (newWindow) newWindow.opener = null\n}\n","import { SVGPathData } from \"svg-pathdata\"\n\n\nexport const V = (y) => ({\n  type: SVGPathData.VERT_LINE_TO,\n  y,\n  relative: false,\n})\n\nexport const S = (x2, y2, x, y) => ({\n  type: SVGPathData.SMOOTH_CURVE_TO,\n  x2,\n  y2,\n  x,\n  y,\n  relative: false,\n})\n\nexport const M = (x, y) => ({\n  type: SVGPathData.MOVE_TO,\n  x,\n  y,\n  relative: false,\n})\nexport const m = (x, y) => ({\n  type: SVGPathData.MOVE_TO,\n  x,\n  y,\n  relative: true,\n})\nexport const L = (x, y) => ({\n  type: SVGPathData.LINE_TO,\n  x,\n  y,\n  relative: false,\n})\nexport const l = (x, y) => ({\n  type: SVGPathData.LINE_TO,\n  x,\n  y,\n  relative: true,\n})\n\nexport const Z = () => ({ type: SVGPathData.CLOSE_PATH })\n"," function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }import { clamp, M4, V, V3 } from \"ts3dutils\"\n\n \n\nconst ACTIONS = [\"zoomIn\", \"zoomOut\", \"left\", \"right\", \"up\", \"down\"] \n\n/**\n * You can't use the keyboard events directly to move the camera, as they are\n * not fired often enough. Instead, we track which keys are down and tick()\n * should be called in the render loop.\n *\n * You need to make a DOM element \"focusable\" for the key events to work.\n *\n * Example to use this in a react-controlled component:\n * ```js\n * const [lookAt, setLookAt] = useState(M4.identity)\n * const svgRef = useRef<SVGSVGElement>()\n * useEffect(() => {\n *   const camController = new OrbitCameraController((v) =>\n *     setLookAt(OrbitCameraController.getLookAt(v)),\n *   )\n *   camController.setState([0, 0.1, 200])\n *   camController.registerListeners(svgRef.current)\n *   let cancel = false\n *   function tick() {\n *     camController!.tick()\n *     if (!cancel) requestAnimationFrame(tick)\n *   }\n *   requestAnimationFrame(tick)\n *   return () => {\n *     cancel = true\n *     camController?.unregisterListeners()\n *   }\n * }, [])\n * ```\n */\nexport class OrbitCameraController {\n   __init() {this.lastPos = V3.O}\n  \n\n   __init2() {this.pressedKeys = {\n    zoomIn: false,\n    zoomOut: false,\n    left: false,\n    right: false,\n    up: false,\n    down: false,\n  }}\n   __init3() {this.pauseCam = false}\n   __init4() {this.udRot = 0.1}\n   __init5() {this.rot = 0}\n   __init6() {this.dist = 10}\n\n  constructor(\n      onCameraChange,\n      keys = {\n      zoomIn: \"w\",\n      zoomOut: \"s\",\n      left: \"a\",\n      right: \"d\",\n      up: \" \",\n      down: \"Control\",\n    },\n  ) {;this.onCameraChange = onCameraChange;this.keys = keys;OrbitCameraController.prototype.__init.call(this);OrbitCameraController.prototype.__init2.call(this);OrbitCameraController.prototype.__init3.call(this);OrbitCameraController.prototype.__init4.call(this);OrbitCameraController.prototype.__init5.call(this);OrbitCameraController.prototype.__init6.call(this);OrbitCameraController.prototype.__init7.call(this);OrbitCameraController.prototype.__init8.call(this);OrbitCameraController.prototype.__init9.call(this);OrbitCameraController.prototype.__init10.call(this);OrbitCameraController.prototype.__init11.call(this);OrbitCameraController.prototype.__init12.call(this);}\n\n  __init7() {this.setState = (m) => {\n    ;[this.udRot, this.rot, this.dist] =\n      OrbitCameraController.toOrbitCameraState(m)\n  }}\n\n  static toOrbitCameraState(m) {\n    if (m instanceof M4) {\n      const eye = m\n        .transposed()\n        .scale(-1)\n        .transformVector(m.getTranslation(), false)\n      return [Math.atan(eye.z / eye.lengthXY()), eye.angleXY(), eye.length()]\n    } else {\n      return m\n    }\n  }\n\n  registerListeners(\n    mouseMoveTarget\n\n\n,\n    keyUpDownTarget = mouseMoveTarget,\n  ) {\n    _optionalChain([this, 'access', _5 => _5.unregister, 'optionalCall', _6 => _6()])\n    mouseMoveTarget.addEventListener(\"mousemove\", this.mousemove)\n    mouseMoveTarget.addEventListener(\"wheel\", this.wheel)\n    keyUpDownTarget.addEventListener(\"keydown\", this.keydown)\n    keyUpDownTarget.addEventListener(\"keyup\", this.keyup)\n    keyUpDownTarget.addEventListener(\"blur\", this.keyup)\n\n    return (this.unregister = () => {\n      mouseMoveTarget.removeEventListener(\"mousemove\", this.mousemove)\n      mouseMoveTarget.removeEventListener(\"wheel\", this.wheel)\n      keyUpDownTarget.removeEventListener(\"keydown\", this.keydown)\n      keyUpDownTarget.removeEventListener(\"keyup\", this.keyup)\n      keyUpDownTarget.removeEventListener(\"keyup\", this.keyup)\n    })\n  }\n\n  __init8() {this.blur = () => {\n    // TODO\n  }}\n\n  unregisterListeners() {\n    _optionalChain([this, 'access', _7 => _7.unregister, 'optionalCall', _8 => _8()])\n  }\n\n  tick() {\n    const dDist = (+this.pressedKeys.zoomOut - +this.pressedKeys.zoomIn) * 0.1\n    const dRot = (-+this.pressedKeys.left + +this.pressedKeys.right) * 0.1\n    const newUDRot = clamp(\n      this.udRot + (+this.pressedKeys.up - +this.pressedKeys.down) * 0.1,\n      -Math.PI * 0.5,\n      Math.PI * 0.5,\n    )\n    if (dDist !== 0 || dRot !== 0 || newUDRot !== this.udRot) {\n      this.dist += dDist\n      this.rot += dRot\n      this.udRot = newUDRot\n      _optionalChain([this, 'access', _9 => _9.onCameraChange, 'optionalCall', _10 => _10(this.ss)])\n    }\n  }\n\n   __init9() {this.mousemove = (e) => {\n    const pagePos = V(e.pageX, e.pageY)\n    const delta = this.lastPos.to(pagePos)\n    if (e.buttons & 1 && !this.pauseCam) {\n      // zRot -= delta.x * 0.25 * DEG\n      const dRot = delta.x / 100\n      const newUDRot = clamp(\n        this.udRot + delta.y / 100,\n        -Math.PI * 0.5,\n        Math.PI * 0.5,\n      )\n      if (newUDRot !== this.udRot || dRot !== 0) {\n        this.udRot = newUDRot\n        this.rot += dRot\n        _optionalChain([this, 'access', _11 => _11.onCameraChange, 'optionalCall', _12 => _12(this.ss)])\n        e.stopImmediatePropagation()\n        e.preventDefault()\n      }\n    }\n    this.lastPos = pagePos\n  }}\n\n   __init10() {this.wheel = (e) => {\n    const newDist = clamp(this.dist + e.deltaY, 0.1, 1000)\n    if (newDist !== this.dist) {\n      this.dist = newDist\n      e.stopImmediatePropagation()\n      e.preventDefault()\n      _optionalChain([this, 'access', _13 => _13.onCameraChange, 'optionalCall', _14 => _14(this.ss)])\n    }\n  }}\n\n  get ss() {\n    return [this.udRot, this.rot, this.dist]\n  }\n\n   __init11() {this.keydown = (e) => {\n    for (const action of ACTIONS) {\n      if (this.keys[action] === e.key) {\n        this.pressedKeys[action] = true\n        e.stopImmediatePropagation()\n        e.preventDefault()\n        return\n      }\n    }\n  }}\n\n   __init12() {this.keyup = (e) => {\n    for (const action of ACTIONS) {\n      if (this.keys[action] === e.key) {\n        this.pressedKeys[action] = false\n        e.stopImmediatePropagation()\n        e.preventDefault()\n        return\n      }\n    }\n  }}\n\n  getLookAt() {\n    return OrbitCameraController.getLookAt(this.ss)\n  }\n\n  static getLookAt([udRot, rot, dist]) {\n    return M4.rotateZ(rot)\n      .rotateY(udRot)\n      .transform(M4.lookAt(V(dist, 0, 0), V3.O, V3.Z))\n  }\n\n  static invertLookAt(m) {\n    const inverse = m.transposed().scale(-1)\n    return {\n      eye: inverse.transformVector(m.getTranslation(), false),\n      dir: inverse.transformVector(V3.Z, false),\n      up: inverse.transformVector(V3.Y.negated(), false),\n    }\n  }\n\n  static toShortString(m, posFactor = 100) {\n    const [udRot, rot, dist] = this.toOrbitCameraState(m)\n    const coordString = (v, f) => Math.floor(v * f)\n    return (\n      coordString(udRot, 100) +\n      \"~\" +\n      coordString(rot, 100) +\n      \"~\" +\n      coordString(dist, 100)\n    )\n  }\n\n  static fromShortString(cam, posFactor = 100) {\n    const coord = (s, f) => +s / f\n    const [udRotStr, rotStr, distStr] = cam.split(\"~\")\n    return [coord(udRotStr, 100), coord(rotStr, 100), coord(distStr, 100)]\n  }\n}\n"," function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }import Card from \"@mui/material/Card\"\nimport CardMedia from \"@mui/material/CardMedia\"\nimport Divider from \"@mui/material/Divider\"\nimport Grid from \"@mui/material/Grid\"\nimport { useTheme } from \"@mui/material/styles\"\nimport TextField from \"@mui/material/TextField\"\nimport * as React from \"react\"\nimport { useCallback, useEffect, useRef } from \"react\"\nimport { SVGPathData } from \"svg-pathdata\"\n\nimport { DEG, M4, V3 } from \"ts3dutils\"\nimport { useHashState } from \"../common/useHashState\"\nimport { INCH } from \"../paperBox1/common\"\nimport { ExportButtons } from \"../paperBox1/ExportButtons\"\nimport * as path from \"../paperBox1/svg\"\nimport { SvgCommonDefs } from \"../paperBox1/SvgCommonDefs\"\nimport { OrbitCameraController } from \"../raymarch/OrbitCameraController\"\n\nfunction gcd(a, b) {\n  return !b ? a : gcd(b, a % b)\n}\n\nfunction lcm(a, b) {\n  return (a * b) / gcd(a, b)\n}\n\nexport default () => {\n  const [state, setState] = useHashState({\n    R: 100,\n    r: 10,\n    d: 20,\n    cam: OrbitCameraController.toShortString([0.1, 0.1, 400]),\n  })\n  const setPartialState = useCallback(\n    (update) => setState((s) => ({ ...s, ...update })),\n    [setState],\n  )\n\n  const lookAt = OrbitCameraController.getLookAt(\n    OrbitCameraController.fromShortString(state.cam),\n  )\n  const svgRef = useRef()\n  useEffect(() => {\n    const camController = new OrbitCameraController((v) =>\n      setPartialState({ cam: OrbitCameraController.toShortString(v) }),\n    )\n    camController.setState(OrbitCameraController.fromShortString(state.cam))\n    camController.registerListeners(svgRef.current)\n    let cancel = false\n    function tick() {\n      camController.tick()\n      if (!cancel) requestAnimationFrame(tick)\n    }\n    requestAnimationFrame(tick)\n    return () => {\n      cancel = true\n      _optionalChain([camController, 'optionalAccess', _ => _.unregisterListeners, 'call', _2 => _2()])\n    }\n  }, [setPartialState])\n\n  const torusSpiral = (R, r, n) => (a) => {\n    const a1 = a / n\n    const a2 = a\n    const xyP = V3.polar(r, a2)\n    return [\n      M4.translate(R).rotateY(a1).transformPoint(xyP),\n      M4.rotateY(a1).transformVector(V3.polar(1, a2)),\n    ]\n  }\n\n  // gl.perspective(70, gl.canvas.width / gl.canvas.height, 0.1, 1000)\n  // gl.lookAt(, V3.O, V3.Y)\n  // const perspective = M4.lookAt(V(0, 0.5, 2.2), V3.O, V3.Y)\n\n  function AxesGizmoSvg({ mat }) {\n    const O = mat.transformPoint(V3.O)\n    const X = mat.transformPoint(V3.X)\n    const Y = mat.transformPoint(V3.Y)\n    const Z = mat.transformPoint(V3.Z)\n    return (\n      React.createElement(React.Fragment, null\n        , React.createElement('line', { x1: O.x, y1: O.y, x2: X.x, y2: X.y, style: { stroke: \"red\" },} )\n        , React.createElement('line', { x1: O.x, y1: O.y, x2: Y.x, y2: Y.y, style: { stroke: \"green\" },} )\n        , React.createElement('line', { x1: O.x, y1: O.y, x2: Z.x, y2: Z.y, style: { stroke: \"blue\" },} )\n      )\n    )\n  }\n\n  const theme = useTheme()\n  const R = state.R\n  const r = state.r\n  const d = state.d\n  const perspective = lookAt\n    .transform(M4.perspective(90, 1, 10, 1000))\n    .scale(200, -200, 1)\n  const normalMatrix = perspective.inversed().transposed().normalized2()\n  console.log(\"normalMatrix\", normalMatrix.toString())\n  // const foos: SVGCommand[] = [path.M(R + r - d, 0)]\n  // const N = lcm(R, r) / R\n  // for (let i = 0; i < t % (N * 360); i++) {\n  //   const angle = i * DEG\n  //   const p = V3.polar(R + r, angle).minus(V3.polar(d, (angle * (R + r)) / r))\n  //   foos.push(path.L(p.x, p.y))\n  // }\n  // const aaa = t * DEG\n  // const oc = V3.polar(R + r, aaa)\n  // const p = V3.polar(R + r, aaa).minus(V3.polar(d, (aaa * (R + r)) / r))\n\n  const ts = torusSpiral(R, r, 60)\n  const foos = [path.M(R + r - d, 0)]\n  const norms = [path.M(R + r - d, 0)]\n  for (let i = 0; i < 360 * 60 * DEG; i += 10 * DEG) {\n    const angle = i\n    const [tsp, tsn] = ts(angle)\n    const p = perspective.transformPoint(tsp)\n    const eps = 1e-4\n    const dp = perspective\n      .transformPoint(ts(angle + eps)[0])\n      .minus(p)\n      .div(eps)\n      .times(d / 100)\n    const pMinusDp = p.minus(dp)\n    const transformedNormal = normalMatrix.transformVector(tsn, false)\n    const transformedNormal2 = transformedNormal.xy().toLength(10)\n    // norms.push(\n    //   path.M(p.x, p.y),\n    //   path.l(transformedNormal2.x, transformedNormal2.y),\n    // )\n    // norms.push(path.M(p.x, p.y), path.L(pMinusDp.x, pMinusDp.y))\n    if (transformedNormal.z <= 0) {\n      // foos.push(path.S(pMinusDp.x, pMinusDp.y, p.x, p.y))\n      foos.push(path.L(p.x, p.y))\n    } else {\n      foos.push(path.M(p.x, p.y))\n    }\n  }\n\n  const what = (\n    React.createElement('svg', {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      ref: svgRef,\n      className: \"adrian\",\n      width: \"512\",\n      height: \"512\",\n      style: {\n        fill: \"none\",\n        stroke: \"#123456\",\n        strokeWidth: (2 * INCH) / 300,\n        width: \"100%\",\n        height: \"100%\",\n      },\n      viewBox: \"-256 -256 512 512\"   ,}\n\n      , React.createElement(SvgCommonDefs, null )\n      , React.createElement(AxesGizmoSvg, { mat: perspective.scale(25),} )\n      /*<rect width={100} height={100} />*/\n      , React.createElement('path', {\n        d: new SVGPathData(foos).encode(),\n        className: \"cut\",\n        style: { fill: \"none\" },}\n      )\n      , React.createElement('path', {\n        d: new SVGPathData(norms).encode(),\n        className: \"cut\",\n        style: { fill: \"green\", stroke: \"green\" },}\n      )\n      /*<circle r={R} style={{ fill: \"none\", stroke: \"red\" }} />*/\n      /*<circle*/\n      /*  cx={oc.x}*/\n      /*  cy={oc.y}*/\n      /*  r={r}*/\n      /*  style={{ fill: \"none\", stroke: \"orange\" }}*/\n      /*/>*/\n      /*<Measure from={[0, 0]} to={[R, 0]} />*/\n      /*<Measure from={oc} to={p} />*/\n    )\n  )\n\n  return (\n    React.createElement(Grid, { container: true, style: { width: \"100%\" },}\n      , React.createElement(Grid, { item: true, xs: 12, md: 10,}\n        , what\n      )\n      , React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        md: 2,\n        sx: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          width: \"100%\",\n          padding: 2,\n          alignItems: \"stretch\",\n          // \"& > *\": { margin: 1 },\n          gap: 2,\n        },}\n\n        , React.createElement(Card, null\n          , React.createElement(CardMedia, {\n            image: \"\",\n            title: \"Contemplative Reptile\" ,\n            sx: {\n              height: 0,\n              paddingTop: \"100%\", // 1:1\n            },}\n          )\n        )\n        , React.createElement(TextField, {\n          label: \"R\",\n          variant: \"outlined\",\n          size: \"small\",\n          type: \"number\",\n          inputProps: { min: 25, step: 1 },\n          value: state.R,\n          onChange: (e) => setPartialState({ R: +e.target.value }),}\n        )\n        , React.createElement(TextField, {\n          variant: \"outlined\",\n          size: \"small\",\n          type: \"number\",\n          inputProps: { min: -100, step: 1 },\n          value: state.r,\n          onChange: (e) => setPartialState({ r: +e.target.value }),\n          label: \"r\",}\n        )\n        , React.createElement(TextField, {\n          variant: \"outlined\",\n          size: \"small\",\n          type: \"number\",\n          inputProps: { min: 0, step: 1 },\n          value: state.d,\n          onChange: (e) => setPartialState({ d: +e.target.value }),\n          label: \"d\",}\n        )\n        , React.createElement(Divider, null )\n        , React.createElement(ExportButtons, { what: what, baseFileName: \"donut\",} )\n        /*{N} {N * 360}*/\n      )\n    )\n  )\n}\n"],"names":["parseHash","hash","substring","split","map","part","key","value","decodeURIComponent","reduce","obj","objectToHash","o","Object","entries","encodeURIComponent","join","defaultDeserialize","x","v","NaN","isNaN","e","console","error","defaultSerialize","useHashState","initialState","deserialize","serialize","wait","createInitialState","useCallback","state","mergedState","assign","document","location","log","history","replaceState","undefined","title","setState","useState","updateHashRef","useRef","useEffect","ops","lastAccessLHS","i","length","op","fn","args","call","_optionalChain","_","current","_2","newState","pushState","onHashChange","window","addEventListener","removeEventListener","ExportButtons","what","baseFileName","getPrintSVG","Provider","replace","variant","onClick","svg","async","svgToPdf","blob","author","SvgPrintContext","createContext","Guide","children","props","useContext","className","Measure","from","to","hideRight","offset","Array","isArray","V","d","textBlank","transform","angleXY","style","fill","stroke","fontSize","dominantBaseline","textAnchor","y","PAPER_SIZES_A","PAPER_SIZES_C","PAPER_SIZES","PaperSizeFromString","str","byName","find","name","a","b","PaperSizeFromDimensions","sort","lhs","rhsFn","PaperSizeToString","PAPER_SIZE_A4","SvgCommonDefs","theme","print","screenStyles","useMemo","palette","text","primary","main","secondary","id","patternUnits","width","height","divider","strokeWidth","INCH","fmtdeg","radiusFromSideWidth","sides","sideWidth","Math","sin","sideWithFromRadius","radius","centerToSideFromSideWidth","tan","radiusFromCenterToSide","centerToSide","cos","sideWidthFromCenterToSide","RegularPolygon","startAngle","sideLength","Error","V3","polar","dTpl","RotStep","count","stepDeg","strings","exps","format","result","openInNewTab","url","newWindow","open","opener","type","VERT_LINE_TO","relative","M","MOVE_TO","L","LINE_TO","l","Z","CLOSE_PATH","ACTIONS","OrbitCameraController","__init","this","lastPos","O","__init2","pressedKeys","zoomIn","zoomOut","left","right","up","down","__init3","pauseCam","__init4","udRot","__init5","rot","__init6","dist","constructor","onCameraChange","keys","prototype","__init7","__init8","__init9","__init10","__init11","__init12","m","toOrbitCameraState","static","M4","eye","transposed","scale","transformVector","getTranslation","atan","z","lengthXY","registerListeners","mouseMoveTarget","keyUpDownTarget","_5","unregister","_6","mousemove","wheel","keydown","keyup","blur","unregisterListeners","_7","_8","tick","dDist","dRot","newUDRot","PI","_9","_10","ss","pagePos","pageX","pageY","delta","buttons","_11","_12","stopImmediatePropagation","preventDefault","newDist","deltaY","_13","_14","action","getLookAt","rotateZ","rotateY","lookAt","inverse","dir","Y","negated","posFactor","coordString","f","floor","cam","coord","s","udRotStr","rotStr","distStr","R","r","toShortString","setPartialState","update","fromShortString","svgRef","camController","cancel","requestAnimationFrame","perspective","normalMatrix","inversed","normalized2","toString","ts","n","a1","a2","xyP","translate","transformPoint","torusSpiral","foos","norms","angle","tsp","tsn","p","eps","dp","minus","div","times","transformedNormal","xy","toLength","push","xmlns","ref","viewBox","mat","X","x1","y1","x2","y2","encode","container","item","xs","md","sx","display","flexDirection","padding","alignItems","gap","image","paddingTop","label","size","inputProps","min","step","onChange","target"],"sourceRoot":""}