{"version":3,"file":"spirograph-index.js","mappings":"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","sources":["/dev/workshop/./src/paperBox1/Measure.tsx?","/dev/workshop/./src/paperBox1/MeasureAngle.tsx?","/dev/workshop/./src/paperBox1/SvgCommonDefs.tsx?","/dev/workshop/./src/paperBox1/common.tsx?","/dev/workshop/./src/paperBox2/Common.tsx?","/dev/workshop/./src/paperBox2/InsideFoldsSvg.tsx?","/dev/workshop/./src/spirograph/index.tsx?"],"sourcesContent":["import * as React from \"react\"\nimport { createContext, useContext } from \"react\"\nimport { DEG, round10, V, } from \"ts3dutils\"\n\n\nexport const SvgPrintContext = createContext(false)\n\nexport function Guide({\n  children,\n  ...props\n}) {\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  return (\n    React.createElement('g', { className: \"guide\", ...props,}\n      , children\n    )\n  )\n}\nexport function Measure({\n  from,\n  to,\n  children,\n  hideRight = false,\n  offset = 0,\n}\n\n\n\n\n\n) {\n  Array.isArray(from) && (from = V(from))\n  Array.isArray(to) && (to = V(to))\n  const d = from.to(to)\n  const length = d.length()\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  if (length < 0.05) return null\n  children ||= \"\" + round10(length, -1)\n  const textBlank = 3 * children.length\n\n  return (\n    React.createElement('g', {\n      transform: ` translate(${from[0]}, ${from[1]}) rotate(${\n        d.angleXY() / DEG\n      }) translate(0, ${offset * 10})`,\n      className: \"measure\",}\n\n      , !hideRight && (\n        React.createElement('path', {\n          style: { fill: \"none\" },\n          d: `M0,0\n          l0,10\n          M4,3\n          l-4,2\n          l4,2`,}\n        )\n      )\n      , React.createElement('path', {\n        style: { fill: \"none\" },\n        d: `\n        M0,5\n        H${(length - textBlank) / 2}\n        M${(length + textBlank) / 2},5\n        H${length}\n        M${length},0\n        l0,10\n        m-4,-7\n        l4,2\n        l-4,2`,}\n      )\n      , React.createElement('text', {\n        style: {\n          stroke: \"none\",\n          fontSize: 4,\n          dominantBaseline: \"middle\",\n          textAnchor: \"middle\",\n        },\n        x: length / 2,\n        y: 5,}\n\n        , children\n      )\n    )\n  )\n}\n"," function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }import * as React from \"react\"\nimport { useContext } from \"react\"\nimport { V, V3 } from \"ts3dutils\"\nimport { fmtdeg, } from \"./common\"\nimport { SvgPrintContext } from \"./Measure\"\n\nexport function MeasureAngle({\n  center,\n  start,\n  toRel,\n  children,\n}\n\n\n\n\n) {\n  Array.isArray(center) && (center = V(center))\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  const radius = 20\n  const startV = V3.polar(radius, start).plus(V(center))\n  const endV = V3.polar(radius, start + toRel).plus(V(center))\n  const textPos = V3.polar(0.7 * radius, start + toRel / 2).plus(V(center))\n  const largeArcFlag = Math.abs(toRel) > Math.PI ? \"1\" : \"0\"\n  const sweepFlag = toRel > 0 ? \"1\" : \"0\"\n  return (\n    React.createElement('g', { className: \"measure\",}\n      , React.createElement('path', {\n        style: { fill: \"none\" },\n        d: `M${startV.x},${startV.y} A${radius},${radius},0,${largeArcFlag},${sweepFlag},${endV.x},${endV.y}`,}\n      )\n      , React.createElement('text', {\n        style: {\n          stroke: \"none\",\n          fontSize: 4,\n          dominantBaseline: \"middle\",\n          textAnchor: \"middle\",\n        },\n        x: textPos.x,\n        y: textPos.y,}\n\n        , _nullishCoalesce(children, () => ( fmtdeg(toRel)))\n      )\n    )\n  )\n}\n","import * as React from \"react\"\n\n\nexport const SvgCommonDefs = () => (\n  React.createElement(React.Fragment, null\n    , React.createElement('defs', null\n      , React.createElement('pattern', { id: \"glue\", patternUnits: \"userSpaceOnUse\", width: \"4\", height: \"4\",}\n        , React.createElement('path', {\n          d: \"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2\"\n\n              ,\n          style: { stroke: \"#eee\", strokeWidth: 1 },}\n        )\n      )\n    )\n    , React.createElement('style', null\n      , \".valley {stroke-dasharray: 1,1;} \"\n      , \".outline \"\n      , \".mountain {stroke-dasharray: 10,2,1,1,1,2;} \"\n    )\n  )\n)\n"," function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }import * as React from \"react\"\n\nimport { arrayRange, DEG, MINUS, round10, TAU, V3 } from \"ts3dutils\"\n\nexport const INCH = 25.4\nexport const fmtdeg = (x) => \"\" + round10(x / DEG, -1) + \"Â°\"\n \n\nexport const radiusFromSideWidth = (sides, sideWidth) =>\n  sideWidth / 2 / Math.sin(TAU / sides / 2)\nexport const sideWithFromRadius = (sides, radius) =>\n  radius * 2 * Math.sin(TAU / sides / 2)\nexport const centerToSideFromSideWidth = (\n  sides,\n  sideWidth,\n) => sideWidth / 2 / Math.tan(TAU / sides / 2)\nexport const radiusFromCenterToSide = (\n  sides,\n  centerToSide,\n) => centerToSide / Math.cos(TAU / sides / 2)\nexport const sideWidthFromCenterToSide = (\n  sides,\n  centerToSide,\n) => centerToSide * 2 * Math.tan(TAU / sides / 2)\n\nexport function RegularPolygon({\n  sides,\n  radius,\n  startAngle = 0,\n  sideLength = undefined,\n  ...props\n}\n\n\n\n\n) {\n  if ((undefined !== sideLength) === (undefined !== radius)) {\n    throw new Error(\"must set either sideLength or radius\")\n  }\n  if (undefined === radius) {\n    radius = radiusFromSideWidth(sides, sideLength)\n  }\n  const { x, y } = V3.polar(radius, startAngle)\n  return (\n    React.createElement('path', {\n      d: dTpl`\n        M${x},${y}\n        ${arrayRange(0, sides).map(\n          (i) => dTpl`L${V3.polar(radius, startAngle + i * (TAU / sides))}`,\n        )}Z`,\n      ...props,}\n    )\n  )\n}\n\nexport function RotStep({\n  id,\n  children,\n  count,\n  stepDeg,\n}\n\n\n\n\n) {\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('g', { id: id,}, children)\n      , arrayRange(0, count - 1).map((i) => (\n        React.createElement('use', {\n          key: i,\n          xlinkHref: \"#\" + id,\n          transform: `rotate(${(i + 1) * stepDeg} 0 0)`,}\n        )\n      ))\n    )\n  )\n}\n\n \n// Always portrait orientation,\nexport const PAPER_SIZES = [\n  [841, 1189, \"A0\"],\n  [594, 841, \"A1\"],\n  [420, 594, \"A2\"],\n  [297, 420, \"A3\"],\n  [210, 297, \"A4\"],\n  [148, 210, \"A5\"],\n  [105, 148, \"A6\"],\n  [74, 105, \"A7\"],\n  [52, 74, \"A8\"],\n  [37, 52, \"A9\"],\n  [26, 37, \"A10\"],\n  [150, 150, \"Origami 15cm\"],\n  [100, 100, \"Origami 10cm\"],\n  [75, 75, \"Origami 7.5cm\"],\n  [215.9, 279.4, \"Letter\"],\n  [215.9, 355.6, \"Legal\"],\n]\n\nexport function PaperSizeFromString(str) {\n  const byName = PAPER_SIZES.find(([, , name]) => name === str)\n  if (byName) return byName\n  const [a, b] = str.split(\"x\")\n  return [+a, +b, \"Custom\"]\n}\nexport function PaperSizeFromDimensions(a, b) {\n  ;[a, b] = [a, b].sort(MINUS)\n  return _nullishCoalesce(PAPER_SIZES.find(([x, y]) => x === a && y === b), () => ( [a, b, \"Custom\"]))\n}\nexport function PaperSizeToString([a, b, name]) {\n  return name === \"Custom\" ? \"\" + a + \"x\" + b : name\n}\n\nexport const PAPER_SIZE_A4 = PAPER_SIZES.find(([, , name]) => name === \"A4\")\n\nexport function dTpl(\n  strings,\n  ...exps\n) {\n  const format = (x) =>\n    \"number\" === typeof x\n      ? \"\" + x\n      : \"string\" === typeof x\n      ? x\n      : Array.isArray(x)\n      ? x.map(format).join(\" \")\n      : x.x + \",\" + x.y\n  let result = strings[0]\n  for (let i = 0; i < exps.length; i++) {\n    result += format(exps[i])\n    result += strings[i + 1]\n  }\n  return result\n}\n\nexport const openInNewTab = (url) => {\n  const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  if (newWindow) newWindow.opener = null\n}\n","import * as React from \"react\"\nimport { useContext } from \"react\"\nimport { V } from \"ts3dutils\"\n\nimport { dTpl, INCH, } from \"../paperBox1/common\"\nimport { Guide, Measure, SvgPrintContext } from \"../paperBox1/Measure\"\nimport { SvgCommonDefs } from \"../paperBox1/SvgCommonDefs\"\n\n// https://math.stackexchange.com/a/885965/230980\nexport function lookUpAngle(\n  r,\n  lookUpAngle2,\n  r2,\n) {\n  return (\n    Math.PI / 2 - lookUpAngle2 - Math.acos((r2 / r) * Math.sin(lookUpAngle2))\n  )\n}\n\nexport function Common({\n  baseRadius,\n  topRadius,\n  radius,\n  style,\n  paperSize,\n  children,\n}\n\n\n\n\n\n\n) {\n  const paperPosition = paperSize && [\n    Math.min(-20, radius - paperSize[0]),\n    Math.min(-20, radius - paperSize[1]),\n  ]\n  const print = useContext(SvgPrintContext)\n  const svgViewBox = paperSize\n    ? [paperPosition[0], paperPosition[1], paperSize[0], paperSize[1]]\n    : [-radius, -radius, radius * 2, radius * 2]\n\n  const boxHeight = topRadius - baseRadius\n  const topLip = radius - topRadius\n  return (\n    React.createElement('svg', {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n      style: {\n        fill: \"none\",\n        stroke: \"#123456\",\n        strokeWidth: (2 * INCH) / 300,\n        ...style,\n      },\n      width: svgViewBox[2] + \"mm\",\n      height: svgViewBox[3] + \"mm\",\n      viewBox: svgViewBox.join(\" \"),\n      className: \"adrian\",}\n\n      , React.createElement(SvgCommonDefs, null )\n      , React.createElement(Guide, { transform: \"translate(-20 -20) rotate(180)\"  ,}\n        , React.createElement('path', {\n          style: { fill: \"none\" },\n          d: dTpl`\n          M${V(baseRadius - topLip, boxHeight * 0.99)}\n          L${V(baseRadius, boxHeight)}\n          L${V(baseRadius, 0)}\n          L${V(-baseRadius, 0)}\n          L${V(-baseRadius, boxHeight)}\n          L${V(topLip - baseRadius, boxHeight * 1.01)}\n          `,}\n        )\n        , React.createElement(Measure, { from: V(baseRadius, 0), to: V(-baseRadius, 0),} )\n        , React.createElement(Measure, { from: V(baseRadius, boxHeight), to: V(baseRadius, 0),} )\n        , React.createElement(Measure, {\n          from: V(topLip - baseRadius, boxHeight),\n          to: V(0, boxHeight),}\n        )\n      )\n\n      , !print && paperSize && (\n        React.createElement('rect', {\n          x: paperPosition[0],\n          y: paperPosition[1],\n          width: paperSize[0],\n          height: paperSize[1],}\n        )\n      )\n      , children\n    )\n  )\n}\n","import * as React from \"react\"\nimport { useContext } from \"react\"\nimport { newtonIterate1d, TAU, V, V3 } from \"ts3dutils\"\n\nimport {\n  dTpl,\n\n  radiusFromCenterToSide,\n  RegularPolygon,\n  RotStep,\n} from \"../paperBox1/common\"\nimport { Measure, SvgPrintContext } from \"../paperBox1/Measure\"\nimport { MeasureAngle } from \"../paperBox1/MeasureAngle\"\nimport { Common } from \"./Common\"\n\n// https://math.stackexchange.com/a/885965/230980\nexport function lookUpAngle(\n  r,\n  lookUpAngle2,\n  r2,\n) {\n  return (\n    Math.PI / 2 - lookUpAngle2 - Math.acos((r2 / r) * Math.sin(lookUpAngle2))\n  )\n}\nexport function lookUpRadius(\n  angle,\n  lookUpAngle2,\n  r2,\n) {\n  return (\n    r2 / Math.cos(angle - Math.PI / 2 + lookUpAngle2) / Math.sin(lookUpAngle2)\n  )\n}\n\nexport function InsideFoldsSvg(props\n\n\n\n\n\n\n) {\n  const { baseRadius, topRadius, radius, sides } = props\n  const basePolyRadius = radiusFromCenterToSide(sides, baseRadius)\n  const topPolyRadius = radiusFromCenterToSide(sides, topRadius)\n\n  const creaseAngle = TAU / sides / 2\n  const innerAngleToC = lookUpAngle(radius, creaseAngle, basePolyRadius)\n  const print = useContext(SvgPrintContext)\n  function highlight(color) {\n    // The colors mainly serve to make the code more readable, i.e. you know\n    // which code makes which line. When printing, no colors.\n    return print ? {} : { stroke: color }\n  }\n\n  const redStartPoint = V(basePolyRadius, 0).plus(\n    V3.polar(topRadius - baseRadius, creaseAngle),\n  )\n  const redDir = V3.X\n  const redLine = (t) => redStartPoint.plus(redDir.times(t))\n  const redEndpoint = redLine(\n    newtonIterate1d((t) => redLine(t).length() - radius, 1, 4),\n  )\n  return (\n    React.createElement(Common, { ...props,}\n      , React.createElement('g', { className: \"fold\",}\n        , React.createElement(RegularPolygon, {\n          radius: basePolyRadius,\n          sides: sides,\n          className: \"valley\",}\n        )\n        , React.createElement(Measure, {\n          offset: -0.5,\n          from: [0, 0],\n          to: V3.polar(baseRadius, creaseAngle),}\n, \"baseRadius\"\n\n        )\n        , React.createElement(Measure, {\n          offset: -0.5,\n          from: V3.polar(baseRadius, creaseAngle),\n          to: V3.polar(topRadius, creaseAngle),\n          hideRight: true,}\n, \"topRadius\"\n\n        )\n        , React.createElement(Measure, {\n          offset: -0.5,\n          from: V3.polar(topRadius, creaseAngle),\n          to: V3.polar(radius, creaseAngle),\n          hideRight: true,}\n, \"radius\"\n\n        )\n        , React.createElement(MeasureAngle, {\n          center: redStartPoint,\n          start: Math.PI,\n          toRel: creaseAngle,}\n        )\n        , React.createElement(Measure, {\n          from: V3.polar(basePolyRadius, -TAU / sides),\n          to: V3.polar(basePolyRadius, 0),}\n        )\n        , React.createElement(RotStep, { id: \"foo\", count: sides, stepDeg: 360 / sides,}\n          , React.createElement('path', {\n            d: dTpl`\n                M${basePolyRadius},0\n                H${radius}`,\n            className: \"mountain\",\n            style: highlight(\"green\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${basePolyRadius},0\n                L${V3.polar(radius, innerAngleToC)}\n                M${basePolyRadius},0\n                L${redStartPoint}`,\n            className: \"valley\",\n            style: highlight(\"blue\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${redStartPoint}\n                L${V3.polar(radius, -innerAngleToC)}`,\n            className: \"mountain\",\n            style: highlight(\"blue\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${topPolyRadius},0\n                L${V3.polar(basePolyRadius, -TAU / sides).plus(\n                  V3.polar(topRadius - baseRadius, -TAU / sides / 2),\n                )}`,\n            className: \"valley\",\n            style: highlight(\"hotpink\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${V3.polar(basePolyRadius, -TAU / sides).plus(\n                  V3.polar(topRadius - baseRadius, -TAU / sides / 2),\n                )}\n                L${V3.polar(topPolyRadius, -TAU / sides)}`,\n            className: \"mountain\",\n            style: highlight(\"orange\"),}\n          )\n          , React.createElement('path', {\n            d: dTpl`\n                M${redStartPoint}\n                L${redEndpoint}`,\n            className: \"valley\",\n            style: highlight(\"red\"),}\n          )\n        )\n      )\n      , React.createElement('g', { className: \"cut\",}\n        , React.createElement('circle', { r: radius,} )\n      )\n    )\n  )\n}\n","import Grid from \"@mui/material/Grid\"\nimport { useTheme } from \"@mui/material/styles\"\nimport * as React from \"react\"\nimport { useEffect, useRef } from \"react\"\nimport { DEG, PI, V, V3 } from \"ts3dutils\"\nimport { lookUpAngle, lookUpRadius } from \"../paperBox2/InsideFoldsSvg\"\n\nclass Circle {\n  constructor(  radius) {;this.radius = radius;}\n\n  angleForDistance(distance) {\n    return distance / this.radius\n  }\n\n  radiusForAngle(angle) {\n    return this.radius\n  }\n}\nfunction _circle(radius) {\n  return function (x) {\n    const angle = x / radius\n    return [V3.polar(radius, angle), V3.polar(1, angle + PI / 2)]\n  }\n}\nfunction _squarcle(radius, d) {\n  const alpha = lookUpAngle(radius, 45 * DEG, d)\n  const sideLength = alpha * 2 * radius\n  console.log(sideLength, alpha / DEG)\n  return function (x) {\n    const quarterCount = Math.floor(x / sideLength)\n    let quarterRest = x % sideLength\n    if (quarterRest > sideLength / 2) quarterRest -= sideLength\n    return [\n      // M4.rotateZ(quarterCount * (Math.PI / 2)).transformVector(\n      V(d - radius, 0).plus(V3.polar(radius, quarterRest / radius)),\n      // ),\n    ]\n  }\n}\n\nclass Squarcle {\n  constructor(\n    /**\n     * side of the side curvature\n     */\n      radius,\n    /**\n     * Distance center to closest point on side\n     */\n      d,\n  ) {;this.radius = radius;this.d = d;}\n\n  sideLength() {\n    const alpha = lookUpAngle(this.radius, 45 * DEG, this.d)\n    return alpha * 2 * this.radius\n  }\n\n  angleForDistance(distance) {\n    const sideLength = this.sideLength()\n    const quarterCount = Math.floor(distance / sideLength)\n    let quarterRest = distance % sideLength\n    if (quarterRest > sideLength / 2) quarterRest -= sideLength\n    const alpha = quarterRest / this.radius\n\n    return (quarterCount * PI) / 2 + alpha\n  }\n\n  radiusForAngle(angle) {\n    angle = angle % (PI / 2)\n    if (angle > PI / 4) angle = angle - PI / 2\n    return lookUpRadius(angle, 45 * DEG, this.d)\n  }\n}\n\n// const shape = new Circle(1 / 3.14)\nconst shape = new Squarcle(0.5, 0.4)\n// const _shape = _circle(2)\nconst _shape = _squarcle(2, 1.8)\n\nfunction line(s) {\n  const outerRadius = 1.5\n  const shapeAngle = shape.angleForDistance(s * outerRadius)\n  const shapeRadius = shape.radiusForAngle(s / outerRadius)\n  const shapeCenter = V3.polar(outerRadius - shapeRadius, s)\n  return [\n    //\n    // V3.polar(outerRadius, Math.min(s, TAU)),\n    // shapeCenter,\n    _shape(s)[0],\n    // V3.polar(shapeRadius, shapeAngle),\n    // shapeCenter.plus(V3.polar(0.2, shapeAngle)),\n    shapeCenter.plus(V3.polar(-0.2, shapeAngle)),\n    // shapeCenter.plus(V3.polar(0.2, innerCircleAngle)),\n    // shapeCenter.plus(V3.polar(0.4, innerCircleAngle + TAU / 3)),\n    // shapeCenter.plus(V3.polar(0.4, innerCircleAngle + (2 * TAU) / 3)),\n  ]\n}\n\nfunction startAnim(context, colors) {\n  // context.rect(100, 100, 100, 100)\n  context.lineWidth = 0.005\n  const scale = Math.min(context.canvas.width, context.canvas.height)\n  context.scale(scale, scale)\n  context.translate(0.5, 0.5)\n  context.scale(0.25, 0.25)\n  let lastTime = 0\n  let stop = false\n  const lastPoints = line(0)\n\n  function paint(highResTimeStamp) {\n    for (; lastTime < highResTimeStamp; lastTime += 1) {\n      const s = lastTime / 1000.0\n      const newPoints = line(s)\n\n      for (let i = 0; i < lastPoints.length; i++) {\n        const newPoint = newPoints[i]\n        const lastPoint = lastPoints[i]\n        if (lastPoint.distanceTo(newPoint) > 0.0001) {\n          context.beginPath()\n          context.strokeStyle = colors[i]\n          context.moveTo(lastPoint.x, lastPoint.y)\n          context.lineTo(newPoint.x, newPoint.y)\n          context.stroke()\n          lastPoints[i] = newPoint\n        }\n      }\n    }\n    !stop && requestAnimationFrame(paint)\n  }\n\n  requestAnimationFrame(paint)\n  return () => {\n    stop = true\n  }\n}\n\nexport default function () {\n  const canvasRef = useRef(null)\n\n  const theme = useTheme()\n\n  useEffect(() => {\n    const canvas = canvasRef.current\n    canvas.height = devicePixelRatio * canvas.offsetHeight\n    canvas.width = devicePixelRatio * canvas.offsetWidth\n    const context = canvas.getContext(\"2d\")\n    return startAnim(context, [\n      theme.palette.primary.main,\n      theme.palette.secondary.main,\n      \"red\",\n      \"blue\",\n      \"black\",\n    ])\n  }, [theme.palette])\n  return (\n    React.createElement(Grid, { container: true, style: { minHeight: \"100vh\" },}\n      , React.createElement(Grid, { item: true, xs: 12,}\n        , React.createElement('canvas', { ref: canvasRef, style: { width: \"100%\", height: \"100%\" },} )\n      )\n    )\n  )\n}\n"],"names":["SvgPrintContext","createContext","Guide","children","props","useContext","className","Measure","from","to","hideRight","offset","Array","isArray","V","d","length","textBlank","transform","angleXY","style","fill","stroke","fontSize","dominantBaseline","textAnchor","x","y","MeasureAngle","center","start","toRel","startV","V3","polar","plus","endV","textPos","largeArcFlag","Math","abs","PI","sweepFlag","lhs","rhsFn","SvgCommonDefs","id","patternUnits","width","height","strokeWidth","INCH","fmtdeg","radiusFromSideWidth","sides","sideWidth","sin","sideWithFromRadius","radius","centerToSideFromSideWidth","tan","radiusFromCenterToSide","centerToSide","cos","sideWidthFromCenterToSide","RegularPolygon","startAngle","sideLength","undefined","Error","dTpl","map","i","RotStep","count","stepDeg","key","xlinkHref","PAPER_SIZES","PaperSizeFromString","str","byName","find","name","a","b","split","PaperSizeFromDimensions","sort","PaperSizeToString","PAPER_SIZE_A4","strings","exps","format","join","result","openInNewTab","url","newWindow","window","open","opener","Common","baseRadius","topRadius","paperSize","paperPosition","min","print","svgViewBox","boxHeight","topLip","xmlns","xmlnsXlink","viewBox","lookUpAngle","r","lookUpAngle2","r2","acos","lookUpRadius","angle","InsideFoldsSvg","basePolyRadius","topPolyRadius","creaseAngle","innerAngleToC","highlight","color","redStartPoint","redDir","X","redLine","t","times","redEndpoint","shape","constructor","this","angleForDistance","distance","quarterCount","floor","quarterRest","alpha","radiusForAngle","_shape","console","log","_squarcle","line","s","shapeAngle","shapeRadius","shapeCenter","canvasRef","useRef","theme","useEffect","canvas","current","devicePixelRatio","offsetHeight","offsetWidth","context","colors","lineWidth","scale","translate","lastTime","stop","lastPoints","requestAnimationFrame","paint","highResTimeStamp","newPoints","newPoint","lastPoint","distanceTo","beginPath","strokeStyle","moveTo","lineTo","startAnim","getContext","palette","primary","main","secondary","container","minHeight","item","xs","ref"],"sourceRoot":""}