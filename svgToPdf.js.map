{"version":3,"file":"svgToPdf.js","mappings":"2MAMO,SAASA,GAAS,MACvBC,EAAK,OACLC,EAAM,IACNC,IAMA,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3B,MAAO,CAAEC,EAAUC,GACjB,mDAAmDC,KAAKN,IACnDO,EAAOC,GAAU,CAACJ,EAAUC,GAAWI,KAAKC,IAEjD,QAAc,IAAJA,EAAU,MAAO,KAGvBC,EAAM,IAAI,IAAJ,CAAgB,CAC1BC,KAAML,EAAQC,EAAS,CAACD,EAAOC,GAAU,CAACA,EAAQD,GAClDM,QAAS,CACPC,IAAK,EACLC,OAAQ,EACRC,KAAM,EACNC,MAAO,GAETC,OAAQX,GAASC,EAAS,WAAa,YACvCW,KAAM,CACJC,MAAOtB,EACPuB,OAAQtB,KAKNuB,EAASX,EAAIY,KAAK,OAGxB,IAASZ,EAAKX,EAAK,EAAG,EAAG,CAAEwB,UAAU,IAGrCb,EAAIc,MACJH,EAAOI,GAAG,UAAU,WAClBxB,EAAQoB,EAAOK,OAAO,mBACxB,IACAL,EAAOI,GAAG,QAASvB,EAAM,GAE7B,C","sources":["/dev/workshop/./src/paperBox1/svgToPdf.ts?"],"sourcesContent":["import blobStream from \"blob-stream\"\nimport PDFDocument from \"pdfkit\"\nimport SVGtoPDF from \"svg-to-pdfkit\"\nimport { round10 } from \"ts3dutils\"\nimport { INCH } from \"./common\"\n\nexport function svgToPdf({\n  title,\n  author,\n  svg,\n}\n\n\n\n) {\n  return new Promise((resolve, reject) => {\n    const [, widthStr, heightStr] =\n      /<svg[^>]*?width=\"([^\"]+)mm\".*?height=\"([^\"]+)mm\"/.exec(svg)\n    const [width, height] = [widthStr, heightStr].map((x) =>\n      // We want it to be at 72 DPI.\n      round10((+x * 72) / INCH, -2),\n    )\n\n    const doc = new PDFDocument({\n      size: width < height ? [width, height] : [height, width],\n      margins: {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n      },\n      layout: width <= height ? \"portrait\" : \"landscape\",\n      info: {\n        Title: title,\n        Author: author,\n      },\n    })\n\n    // pipe the document to a blob\n    const stream = doc.pipe(blobStream())\n\n    // add your content to the document here, as usual\n    SVGtoPDF(doc, svg, 0, 0, { assumePt: false })\n\n    // get a blob when you're done\n    doc.end()\n    stream.on(\"finish\", function () {\n      resolve(stream.toBlob(\"application/pdf\"))\n    })\n    stream.on(\"error\", reject)\n  })\n}\n"],"names":["svgToPdf","title","author","svg","Promise","resolve","reject","widthStr","heightStr","exec","width","height","map","x","doc","size","margins","top","bottom","left","right","layout","info","Title","Author","stream","pipe","assumePt","end","on","toBlob"],"sourceRoot":""}