{"version":3,"file":"paperEnvelope-index.js","mappings":"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","sources":["/dev/workshop/./src/paperBox1/PaperAutocomplete.tsx?","/dev/workshop/./src/paperBox1/ExportButtons.tsx?","/dev/workshop/./src/common/useHashState.ts?","/dev/workshop/./src/paperBox1/svg.ts?","/dev/workshop/./src/paperBox1/PaperSize.tsx?","/dev/workshop/./src/paperBox1/Measure.tsx?","/dev/workshop/./src/paperEnvelope/EnvelopeSvg.tsx?","/dev/workshop/./src/paperEnvelope/index.tsx?","/dev/workshop/./src/paperBox1/SvgCommonDefs.tsx?"],"sourcesContent":["import Autocomplete from \"@mui/material/Autocomplete\"\nimport TextField from \"@mui/material/TextField\"\nimport * as React from \"react\"\nimport { forwardRef, } from \"react\"\nimport { PAPER_SIZES, PaperSizeFromDimensions } from \"./PaperSize\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const PaperAutocomplete = forwardRef(\n  (\n    {\n      disableClearance = false,\n      onChange,\n      value,\n      label,\n    },\n    ref,\n  ) => {\n    let paperSize = null\n    if (value) {\n      const [a, b] = value\n      paperSize = PaperSizeFromDimensions(a, b)\n    }\n    return (\n      React.createElement(Autocomplete, {\n        ref: ref,\n        disableClearable: disableClearance,\n        size: \"small\",\n        freeSolo: true,\n        renderInput: (params) => (\n          React.createElement(TextField, { ...params, label: label, variant: \"outlined\",} )\n        ),\n        value: paperSize,\n        onChange: (e, newValue) => {\n          if (\"string\" === typeof newValue) {\n            if (newValue.trim() === \"\") {\n              if (!disableClearance) {\n                onChange(null)\n              }\n            } else {\n              const match = /(\\d+(?:\\.\\d+)?)\\D*?(\\d+(?:\\.\\d+)?)?\\D*$/.exec(\n                newValue,\n              )\n              if (match) {\n                const [, widthStr, heightStr] = match\n                onChange(\n                  PaperSizeFromDimensions(+widthStr, +(heightStr || widthStr)),\n                )\n              }\n            }\n          } else {\n            onChange(newValue)\n          }\n        },\n        getOptionLabel: (val) => {\n          const [width, height, name = \"custom\"] = val\n          return `${name} ${width}x${height}mm`\n        },\n        options: PAPER_SIZES,}\n      )\n    )\n  },\n) \n","import Button from \"@mui/material/Button\"\nimport fileDownload from \"js-file-download\"\n\nimport * as React from \"react\"\nimport ReactDOMServer from \"react-dom/server\"\nimport { SvgPrintContext } from \"./Measure\"\n\nexport function ExportButtons({\n  what,\n  baseFileName,\n}\n\n\n) {\n  const getPrintSVG = () =>\n    ReactDOMServer.renderToStaticMarkup(\n      React.createElement(SvgPrintContext.Provider, { value: true,}, what),\n    ).replace(/\\s{2,}/g, \" \")\n  const asSVG = () => {\n    const svg = getPrintSVG()\n    fileDownload(svg, baseFileName + \".svg\")\n  }\n  const asTemplatePDF = async () => {\n    const { svgToPdf } = await import(\n      /* webpackChunkName: \"svgToPdf\" */ \"../paperBox1/svgToPdf\"\n    )\n\n    // add your content to the document here, as usual\n    const blob = await svgToPdf({\n      title: baseFileName,\n      author: \"Adrian Leonhard\",\n      svg: getPrintSVG(),\n    })\n\n    fileDownload(blob, baseFileName + \".pdf\")\n  }\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement(Button, { variant: \"contained\", onClick: asSVG,}, \"Download As SVG\"\n\n      )\n      , React.createElement(Button, { variant: \"contained\", onClick: asTemplatePDF,}, \"Template as PDF\"\n\n      )\n    )\n  )\n}\n"," function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }import debounce from \"lodash/debounce\"\nimport mapValues from \"lodash/mapValues\"\nimport { useCallback, useEffect, useRef, useState } from \"react\"\nimport {\n  PAPER_SIZE_A4,\n\n  PaperSizeFromString,\n  PaperSizeToString,\n} from \"../paperBox1/PaperSize\"\n\nconst parseHash = (hash) => {\n  return !hash\n    ? {}\n    : hash\n        .substring(1)\n        .split(\"&\")\n        .map((part) => {\n          const [key, value] = part.split(\"=\")\n          return [decodeURIComponent(key), decodeURIComponent(value)]\n        })\n        .reduce(\n          (obj, [key, value]) => {\n            obj[key] = value\n            return obj\n          },\n          {} ,\n        )\n}\nconst objectToHash = (o) => {\n  return (\n    \"#\" +\n    Object.entries(o)\n      .map(\n        ([key, value]) =>\n          encodeURIComponent(key) + \"=\" + encodeURIComponent(value),\n      )\n      .join(\"&\")\n  )\n}\n\nconst defaultDeserialize = (\n  x,\n) =>\n  mapValues(x, (v, key) => {\n    if (\"paperSize\" === key) {\n      try {\n        return PaperSizeFromString(v)\n      } catch (e) {\n        console.error(e)\n        return PAPER_SIZE_A4\n      }\n    } else if (\"true\" === v) {\n      return true\n    } else if (\"false\" === v) {\n      return false\n    } else if (\"NaN\" === v) {\n      return NaN\n    } else if (\"undefined\" === v) {\n      return undefined\n    } else if (\"null\" === v) {\n      return null\n    } else if (\"\" === v) {\n      return \"\"\n    } else if (!isNaN(+v)) {\n      return +v\n    } else {\n      return v\n    }\n  })\nconst defaultSerialize = (x) =>\n  mapValues(x, (v, key) =>\n    key === \"paperSize\" ? PaperSizeToString(v ) : \"\" + v,\n  )\n\nexport function useHashState(\n  initialState,\n  {\n    deserialize = defaultDeserialize,\n    serialize = defaultSerialize,\n    wait = 1000,\n  } = {},\n) {\n  const createInitialState = useCallback(() => {\n    const state =\n      \"function\" === typeof initialState\n        ? (initialState )()\n        : initialState\n    // hash overrides parameter\n    const mergedState = deserialize(\n      Object.assign(serialize(state), parseHash(document.location.hash)),\n    ) \n    console.log(\"replaceState\")\n    history.replaceState(\n      undefined,\n      document.title,\n      objectToHash(serialize(mergedState)),\n    )\n\n    return mergedState\n  }, [deserialize, initialState, serialize])\n  const [state, setState] = useState(createInitialState)\n  const updateHashRef = useRef()\n  useEffect(() => _optionalChain([updateHashRef, 'access', _ => _.current, 'optionalCall', _2 => _2(state)]), [state])\n  if (!updateHashRef.current) {\n    console.log(\"pushState\")\n    updateHashRef.current = debounce(function (newState) {\n      history.pushState(\n        undefined,\n        document.title,\n        objectToHash(serialize(newState)),\n      )\n    }, wait)\n  }\n\n  useEffect(() => {\n    const onHashChange = () => {\n      setState(createInitialState())\n    }\n    window.addEventListener(\"hashchange\", onHashChange)\n    return () => {\n      window.removeEventListener(\"hashchange\", onHashChange)\n    }\n  }, [createInitialState])\n  return [state, setState]\n}\n","import last from \"lodash/last\"\nimport { SVGPathData } from \"svg-pathdata\"\n\n\n\n\n\n\n\n\n\n\nimport { V as VV } from \"ts3dutils\"\n\nexport function H(x) {\n  return { type: SVGPathData.HORIZ_LINE_TO, relative: false, x: x }\n}\n\nexport function A(\n  rx,\n  ry,\n  xAxisRotation,\n  largeArcFlag,\n  sweepFlag,\n  p,\n) {\n  return {\n    lArcFlag: largeArcFlag,\n    rX: rx,\n    rY: ry,\n    relative: false,\n    sweepFlag: sweepFlag,\n    type: SVGPathData.ARC,\n    x: p.x,\n    xRot: 0,\n    y: p.y,\n  }\n}\n\nexport const C = (\n  x1,\n  y1,\n  x2,\n  y2,\n  x,\n  y,\n) => ({\n  type: SVGPathData.CURVE_TO,\n  x1,\n  y1,\n  x2,\n  y2,\n  x,\n  y,\n  relative: false,\n})\n\nexport const V = (y) => ({\n  type: SVGPathData.VERT_LINE_TO,\n  y,\n  relative: false,\n})\n\nexport const S = (x2, y2, x, y) => ({\n  type: SVGPathData.SMOOTH_CURVE_TO,\n  x2,\n  y2,\n  x,\n  y,\n  relative: false,\n})\n\n\n\nexport function M(a1, a2) {\n  const [x, y] = a2 === undefined ? [(a1 ).x, (a1 ).y] : [a1, a2]\n  return { type: SVGPathData.MOVE_TO, x, y, relative: false }\n}\n\nexport const m = (x, y) => ({\n  type: SVGPathData.MOVE_TO,\n  x,\n  y,\n  relative: true,\n})\n\n\n\nexport function L(a1, a2) {\n  const [x, y] = a2 === undefined ? [(a1 ).x, (a1 ).y] : [a1, a2]\n  return { type: SVGPathData.LINE_TO, x, y, relative: false }\n}\n\nexport const l = (x, y) => ({\n  type: SVGPathData.LINE_TO,\n  x,\n  y,\n  relative: true,\n})\n\nexport const Z = () => ({ type: SVGPathData.CLOSE_PATH })\n\nexport const encode = (...path) => {\n  const modPath = []\n  let lastX = 0,\n    lastY = 0\n  for (const c of path) {\n    if (\"function\" === typeof c) {\n      for (const c2 of c(lastX, lastY)) {\n        modPath.push(c2)\n      }\n    } else {\n      modPath.push(c)\n    }\n    const lastC = last(modPath)\n    if (\"x\" in lastC) lastX = lastC.x\n    if (\"y\" in lastC) lastY = lastC.y\n  }\n  return new SVGPathData(modPath).round(3).encode()\n}\n \n\nexport function Corner(rad, x, y) {\n  return (prevX, prevY) => {\n    const prev = VV(prevX, prevY)\n    const p1 = VV(x, y)\n    const dir1 = prev.to(p1).toLength(rad)\n    const p2 = VV(p1.x + dir1.y, p1.y - dir1.x)\n    return [L(p1.minus(dir1)), A(rad, rad, 0, 0, 0, p2)]\n  }\n}\n"," function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }import { MINUS } from \"ts3dutils\"\n\n \n// Always portrait orientation,\n\n// Always portrait orientation,\nexport const PAPER_SIZES_A = [\n  [841, 1189, \"A0\"],\n  [594, 841, \"A1\"],\n  [420, 594, \"A2\"],\n  [297, 420, \"A3\"],\n  [210, 297, \"A4\"],\n  [148, 210, \"A5\"],\n  [105, 148, \"A6\"],\n  [74, 105, \"A7\"],\n  [52, 74, \"A8\"],\n  [37, 52, \"A9\"],\n  [26, 37, \"A10\"],\n]\n\nexport function PaperSizeEquals([aw, ah], [bw, bh]) {\n  return aw === bw && bh === bw\n}\n\nexport const PAPER_SIZES_B = [\n  [1000, 1414, \"C0\"],\n  [707, 1000, \"C1\"],\n  [500, 707, \"C2\"],\n  [353, 500, \"C3\"],\n  [250, 353, \"C4\"],\n  [176, 250, \"C5\"],\n  [125, 176, \"C6\"],\n  [88, 125, \"C7\"],\n  [62, 88, \"C8\"],\n  [44, 62, \"C9\"],\n  [31, 44, \"C10\"],\n]\n\n// C size envelopes fit A size paper.\nexport const PAPER_SIZES_C = [\n  [917, 1297, \"C0\"],\n  [648, 917, \"C1\"],\n  [458, 648, \"C2\"],\n  [324, 458, \"C3\"],\n  [229, 324, \"C4\"],\n  [162, 229, \"C5\"],\n  [114, 162, \"C6\"],\n  [81, 114, \"C7\"],\n  [57, 81, \"C8\"],\n  [40, 57, \"C9\"],\n  [28, 40, \"C10\"],\n]\nexport const PAPER_SIZES = [\n  ...PAPER_SIZES_A,\n  [150, 150, \"Origami 15cm\"],\n  [100, 100, \"Origami 10cm\"],\n  [75, 75, \"Origami 7.5cm\"],\n  [215.9, 279.4, \"Letter\"],\n  [215.9, 355.6, \"Legal\"],\n]\n\nexport const ALL_PAPER_SIZES = [\n  ...PAPER_SIZES,\n  ...PAPER_SIZES_C,\n  ...PAPER_SIZES_B,\n]\n\nexport function PaperSizeFromString(str) {\n  const byName = PAPER_SIZES.find(([, , name]) => name === str)\n  if (byName) return byName\n  const [a, b] = str.split(\"x\")\n  return [+a, +b, \"Custom\"]\n}\nexport function PaperSizeFromDimensions(a, b) {\n  ;[a, b] = [a, b].sort(MINUS)\n  return _nullishCoalesce(PAPER_SIZES.find(([x, y]) => x === a && y === b), () => ( [a, b, \"Custom\"]))\n}\nexport function PaperSizeToString([a, b, name]) {\n  return name === \"Custom\" ? \"\" + a + \"x\" + b : name\n}\n\nexport const PAPER_SIZE_A4 = PAPER_SIZES_A[4]\n","import * as React from \"react\"\nimport { createContext, useContext } from \"react\"\nimport { DEG, round10, V, } from \"ts3dutils\"\n\n\nexport const SvgPrintContext = createContext(false)\n\nexport function Guide({\n  children,\n  ...props\n}) {\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  return (\n    React.createElement('g', { className: \"guide\", ...props,}\n      , children\n    )\n  )\n}\nexport function Measure({\n  from,\n  to,\n  children,\n  R,\n  hideRight = false,\n  offset = 0,\n}\n\n\n\n\n\n\n) {\n  Array.isArray(from) && (from = V(from))\n  Array.isArray(to) && (to = V(to))\n  const d = from.to(to)\n  const length = d.length()\n  const isSvgPrint = useContext(SvgPrintContext)\n  if (isSvgPrint) return null\n  if (length < 0.05) return null\n  children ||= (R ? \"R\" : \"\") + round10(length, -1)\n  const textBlank = 3 * children.length\n\n  return (\n    React.createElement('g', {\n      transform: ` translate(${from[0]}, ${from[1]}) rotate(${\n        d.angleXY() / DEG\n      }) translate(0, ${offset * 10})`,\n      className: \"measure\",}\n\n      , !hideRight && (\n        React.createElement('path', {\n          style: { fill: \"none\" },\n          d: `M0,0\n          l0,10\n          M4,3\n          l-4,2\n          l4,2`,}\n        )\n      )\n      , React.createElement('path', {\n        style: { fill: \"none\" },\n        d: `\n        M0,5\n        H${(length - textBlank) / 2}\n        M${(length + textBlank) / 2},5\n        H${length}\n        M${length},0\n        l0,10\n        m-4,-7\n        l4,2\n        l-4,2`,}\n      )\n      , React.createElement('text', {\n        style: {\n          stroke: \"none\",\n          fontSize: 4,\n          dominantBaseline: \"middle\",\n          textAnchor: \"middle\",\n        },\n        x: length / 2,\n        y: 5,}\n\n        , children\n      )\n    )\n  )\n}\n"," function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }import sortBy from \"lodash/sortBy\"\nimport * as React from \"react\"\nimport { useContext } from \"react\"\nimport { SVGPathData } from \"svg-pathdata\"\n\nimport { DEG, } from \"ts3dutils\"\n\nimport { Guide, Measure, SvgPrintContext } from \"../paperBox1/Measure\"\nimport {\n  PAPER_SIZE_A4,\n  PAPER_SIZES,\n  PAPER_SIZES_C,\n\n  PaperSizeFromDimensions,\n} from \"../paperBox1/PaperSize\"\nimport * as path from \"../paperBox1/svg\"\nimport { SvgCommonDefs } from \"../paperBox1/SvgCommonDefs\"\nimport claspsSvgString from \"./clasps.inkscape.svg?raw\"\n\nconst claspsSvg = new DOMParser().parseFromString(\n  claspsSvgString,\n  \"image/svg+xml\",\n).documentElement\n\nconst clasps = sortBy(\n  Array.from(claspsSvg.children)\n    .filter((c) => c.tagName === \"g\" && c.id !== \"guides\")\n    .map((c) => {\n      const children = Array.from(c.children)\n      const name = c.getAttribute(\"inkscape:label\")\n      function getPath(inkscapeLabel) {\n        const pathEl = children.find(\n          (c) =>\n            c.tagName === \"path\" &&\n            c.getAttribute(\"inkscape:label\") === inkscapeLabel,\n        )\n        if (_optionalChain([pathEl, 'optionalAccess', _ => _.getAttribute, 'call', _2 => _2(\"transform\")])) {\n          console.error(name, pathEl)\n          throw new Error(`Can't find path ${inkscapeLabel} in ${name}!`)\n        }\n        return _nullishCoalesce(_optionalChain([pathEl, 'optionalAccess', _3 => _3.getAttribute, 'call', _4 => _4(\"d\")]), () => ( \"\"))\n      }\n\n      return {\n        name: name,\n        bottomFold: getPath(\"bottomFold\"),\n        bottomCut: getPath(\"bottomCut\"),\n        topCut: getPath(\"topCut\"),\n      }\n    }),\n  (c) => c.name,\n)\nexport const claspNames = clasps.map((c) => c.name)\nexport function EnvelopeDimensions(\n  width,\n  height,\n  overlap,\n  envelopeHeight,\n) {\n  const a = Math.min(width, height)\n  const d = overlap / 2\n  const r2 = d / (1 - Math.cos(45 * DEG))\n  const h = r2 * Math.sin(45 * DEG)\n  // s is the short perpendicular distance from the side to the indent.\n  const s = Math.sin(45 * DEG) * envelopeHeight + d\n  // t is the y-distance from the top to where the diagonal cut at the bottom right starts.\n  const t = Math.sin(45 * DEG) * 2 * envelopeHeight + d\n  const envelopeWidth = Math.SQRT2 * (a - overlap) - envelopeHeight\n  const foldedCenter = a / 2 - Math.SQRT1_2 * envelopeHeight\n  return { a, d, r2, h, s, t, envelopeWidth, foldedCenter }\n}\n\nexport const presetsForOverlap = (overlap) =>\n  [\n    PAPER_SIZES_C[4],\n    PAPER_SIZES_C[5],\n    PAPER_SIZES_C[6],\n    PAPER_SIZES_C[7],\n    PAPER_SIZES_C[8],\n  ].map(([envelopeHeight, envelopeWidth, name]) => {\n    const a = Math.round(\n      (envelopeWidth + envelopeHeight) / Math.SQRT2 + overlap,\n    )\n    return {\n      envelopeHeight: envelopeHeight,\n      overlap: overlap,\n      paperSize: PaperSizeFromDimensions(a, a),\n      name: `${name} ${envelopeHeight}x${envelopeWidth}`,\n    }\n  })\n\nexport function EnvelopeSvg({\n  paperSize,\n  envelopeHeight,\n  overlap,\n  cornerRadius,\n  style,\n  claspIds,\n}\n\n\n\n\n\n\n) {\n  const r = 10\n\n  const [width, height] = paperSize\n\n  const { a, d, r2, h, s, t, foldedCenter } = EnvelopeDimensions(\n    width,\n    height,\n    overlap,\n    envelopeHeight,\n  )\n  const clasp = clasps.filter(\n    (g) => claspIds.includes(\"*\") || claspIds.includes(g.name),\n  )\n\n  const cArc = (r, x, y) => ({\n    type: SVGPathData.ARC,\n    rX: r,\n    rY: r,\n    xRot: 0,\n    lArcFlag: 0,\n    sweepFlag: 1,\n    x: x,\n    y: y,\n    relative: false,\n  })\n\n  const cutOffBottom = false\n  const claspScale = a / 210\n\n  const outline = new SVGPathData([\n    path.M(0, r),\n    // top\n    cArc(r, r, 0),\n    path.L(a - s - h, 0),\n    cArc(r2, a - s, d),\n    cArc(r2, a - s + h, 0),\n    path.L(a - r, 0),\n    // right\n    cArc(r, a, r),\n    path.L(a, s - h),\n    cArc(r2, a - d, s),\n    cArc(r2, a, s + h),\n    // bottom right cut\n    ...(cutOffBottom\n      ? [\n          path.L(a, t - h),\n          cArc(r2, a - d, t),\n          path.L(t, a - d),\n          cArc(r2, t - h, a),\n        ]\n      : [path.L(a, a - r), cArc(r, a - r, a)]),\n    // bottom\n    path.L(s + h, a),\n    cArc(r2, s, a - d),\n    cArc(r2, s - h, a),\n    path.L(r, a),\n    // left\n    cArc(r, 0, a - r),\n    path.L(0, a - s + h),\n    cArc(r2, d, a - s),\n    cArc(r2, 0, a - s - h),\n    path.Z(),\n  ]).encode()\n\n  const glue = new SVGPathData([\n    path.M(a - 2 * d, s + h),\n    cArc(r2, a - d, s),\n    cArc(r2, a, s + h),\n    path.L(a, 2 * s),\n    cArc(r2, a - 2 * d, 2 * s - h),\n    path.Z(),\n  ]).encode()\n\n  const valley = new SVGPathData([\n    path.M(a - s, d),\n    path.L(a - d, s),\n    path.L(s, a - d),\n    path.L(d, a - s),\n    path.Z(),\n  ]).encode()\n\n  const ref = _nullishCoalesce(PAPER_SIZES.find(([w, _h]) => w < envelopeHeight), () => ( PAPER_SIZE_A4))\n  const [refH, refW, refName] = ref\n  const print = useContext(SvgPrintContext)\n\n  return (\n    React.createElement('svg', {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      style: style,\n      width: width + \"mm\",\n      height: height + \"mm\",\n      viewBox: `0 0 ${width} ${height}`,\n      className: \"adrian\",}\n\n      , React.createElement(SvgCommonDefs, null )\n      , React.createElement('g', null\n        , React.createElement('path', { d: outline, className: \"cut\",} )\n        , React.createElement('path', { d: valley, className: \"valley\", id: \"envelopeFold\",} )\n      )\n      , clasp.map((clasp) => (\n        React.createElement('g', { id: `clasp-${clasp.name}`,}\n          , React.createElement('path', {\n            d: clasp.bottomCut,\n            className: \"cut\",\n            transform: `translate(${a - foldedCenter} ${\n              a - foldedCenter\n            }) rotate(135) scale(${claspScale}) translate(-24 -24)`,}\n          )\n          , React.createElement('path', {\n            d: clasp.topCut,\n            className: \"cut\",\n            transform: `translate(${foldedCenter} ${foldedCenter}) rotate(135) scale(${claspScale}) translate(-24 -24)`,}\n          )\n\n          , React.createElement('path', {\n            d: clasp.bottomFold,\n            className: \"valley\",\n            transform: `translate(${a - foldedCenter} ${\n              a - foldedCenter\n            }) rotate(135) scale(${claspScale}) translate(-24 -24)`,\n            id: \"bottomFold\",}\n          )\n        )\n      ))\n\n      , React.createElement(Guide, {\n        transform: `translate(${a / 2} ${a / 2}) rotate(-45) translate(${\n          -refW / 2\n        } ${-refH / 2})`,}\n\n        , React.createElement('text', { y: refH, style: { fontSize: \"xx-small\" },}\n          , refName\n        )\n        , React.createElement('rect', { width: refW, height: refH, style: { fill: \"none\" },} )\n      )\n      , React.createElement(Guide, null\n        , React.createElement('path', { d: glue, className: \"glue\",} )\n        , React.createElement('path', { d: glue, className: \"glue\", transform: \"matrix(0 1 1 0 0 0)\"     ,} )\n      )\n      , React.createElement(Measure, { from: [a - s, d], to: [a - d, s],} )\n      , React.createElement(Measure, { from: [d, a - s], to: [a - s, d],} )\n    )\n  )\n}\n"," function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }import Card from \"@mui/material/Card\"\nimport CardMedia from \"@mui/material/CardMedia\"\nimport Divider from \"@mui/material/Divider\"\nimport FormControl from \"@mui/material/FormControl\"\nimport Grid from \"@mui/material/Grid\"\nimport InputLabel from \"@mui/material/InputLabel\"\nimport MenuItem from \"@mui/material/MenuItem\"\nimport Select from \"@mui/material/Select\"\nimport TextField from \"@mui/material/TextField\"\nimport * as React from \"react\"\nimport { useCallback, useMemo } from \"react\"\nimport { round10 } from \"ts3dutils\"\nimport { useHashState } from \"../common/useHashState\"\nimport { ExportButtons } from \"../paperBox1/ExportButtons\"\nimport { PaperAutocomplete } from \"../paperBox1/PaperAutocomplete\"\nimport { PAPER_SIZE_A4 } from \"../paperBox1/PaperSize\"\nimport {\n  claspNames,\n  EnvelopeDimensions,\n  EnvelopeSvg,\n  presetsForOverlap,\n} from \"./EnvelopeSvg\"\n\nexport default () => {\n  const [state, setState] = useHashState({\n    overlap: 10,\n    envelopeHeight: 118,\n    cornerRadius: 10,\n    paperSize: PAPER_SIZE_A4,\n    claspId: \"Hexagon\",\n  })\n  const setPartialState = useCallback(\n    (update) => setState((s) => ({ ...s, ...update })),\n    [setState],\n  )\n\n  const { envelopeWidth } = EnvelopeDimensions(\n    state.paperSize[0],\n    state.paperSize[1],\n    state.overlap,\n    state.envelopeHeight,\n  )\n\n  const presets = useMemo(\n    () => presetsForOverlap(state.overlap),\n    [state.overlap],\n  )\n\n  return (\n    React.createElement(Grid, { container: true, style: { width: \"100%\" },}\n      , React.createElement(Grid, { size: { xs: 12, md: 10 }, padding: 1,}\n        , React.createElement(EnvelopeSvg, {\n          ...state,\n          claspIds: [state.claspId],\n          paperSize: state.paperSize,\n          style: {\n            width: \"100%\",\n            height: \"100%\",\n          },}\n        )\n      )\n      , React.createElement(Grid, {\n        size: { xs: 12, md: 2 },\n        sx: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          width: \"100%\",\n          padding: 2,\n          alignItems: \"stretch\",\n          // \"& > *\": { margin: 1 },\n          gap: 2,\n        },}\n\n        , React.createElement(Card, null\n          , React.createElement(CardMedia, {\n            image: \"\",\n            title: \"Contemplative Reptile\" ,\n            sx: {\n              height: 0,\n              paddingTop: \"100%\", // 1:1\n            },}\n          )\n        )\n        , React.createElement(PaperAutocomplete, {\n          label: \"Paper Size\" ,\n          value: state.paperSize,\n          disableClearance: true,\n          onChange: (v) => setPartialState({ paperSize: v }),}\n        )\n        , React.createElement(TextField, {\n          label: \"Envelope Height\" ,\n          variant: \"outlined\",\n          size: \"small\",\n          type: \"number\",\n          inputProps: { min: 25, step: 1 },\n          value: state.envelopeHeight,\n          onChange: (e) => setPartialState({ envelopeHeight: +e.target.value }),}\n        )\n        , React.createElement(TextField, {\n          variant: \"outlined\",\n          size: \"small\",\n          type: \"number\",\n          disabled: true,\n          value: round10(envelopeWidth / state.envelopeHeight, -2),\n          label: \"Aspect Ratio\" ,}\n        )\n        , React.createElement(TextField, {\n          variant: \"outlined\",\n          size: \"small\",\n          type: \"number\",\n          inputProps: { min: 0, step: 1 },\n          value: state.cornerRadius,\n          onChange: (e) => setPartialState({ cornerRadius: +e.target.value }),\n          label: \"Corner Radius\" ,}\n        )\n        , React.createElement(TextField, {\n          variant: \"outlined\",\n          size: \"small\",\n          type: \"number\",\n          inputProps: { min: 0, step: 1 },\n          value: state.overlap,\n          onChange: (e) => setPartialState({ overlap: +e.target.value }),\n          label: \"Overlap\",}\n        )\n        , React.createElement(FormControl, { variant: \"outlined\", size: \"small\",}\n          , React.createElement(InputLabel, { id: \"clasp-label\",}, \"Clasp\")\n          , React.createElement(Select, {\n            value: state.claspId,\n            onChange: (e) => setPartialState({ claspId: e.target.value }),\n            labelId: \"clasp-label\",\n            label: \"Clasp\",}\n\n            , claspNames.map((n) => (\n              React.createElement(MenuItem, { value: n, key: n,}\n                , n\n              )\n            ))\n          )\n        ), \" \"\n        , React.createElement(FormControl, { variant: \"outlined\", size: \"small\",}\n          , React.createElement(InputLabel, { id: \"clasp-label\",}, \"Preset\")\n          , React.createElement(Select, {\n            value: \n              _nullishCoalesce(_optionalChain([presets, 'access', _ => _.find, 'call', _2 => _2(\n                (x) =>\n                  x.envelopeHeight === state.envelopeHeight &&\n                  x.paperSize[0] === state.paperSize[0],\n              ), 'optionalAccess', _3 => _3.name]), () => ( \"\"))\n            ,\n            onChange: (e) => {\n              const matchingPreset = presets.find(\n                (p) => p.name === e.target.value,\n              )\n              matchingPreset &&\n                setPartialState({\n                  envelopeHeight: matchingPreset.envelopeHeight,\n                  overlap: matchingPreset.overlap,\n                  paperSize: matchingPreset.paperSize,\n                })\n            },\n            labelId: \"clasp-label\",\n            label: \"Preset\",}\n\n            , presets.map((p) => (\n              React.createElement(MenuItem, { value: p.name, key: p.name,}\n                , p.name\n              )\n            ))\n          )\n        )\n        , React.createElement(Divider, null )\n        , React.createElement(ExportButtons, {\n          baseFileName: `envelope-${state.paperSize[0]}-${state.envelopeHeight}-${state.overlap}-${state.claspId}`,\n          what: \n            React.createElement(EnvelopeSvg, {\n              ...state,\n              paperSize: state.paperSize,\n              claspIds: [state.claspId],}\n            )\n          ,}\n        )\n      )\n    )\n  )\n}\n","\nimport { blue, green, orange, pink, red } from \"@mui/material/colors\"\nimport { useTheme } from \"@mui/material/styles\"\nimport * as React from \"react\"\nimport { useContext, useMemo } from \"react\"\nimport { SvgPrintContext } from \"./Measure\"\n\n\nexport const SvgCommonDefs = () => {\n  const theme = useTheme()\n  const print = useContext(SvgPrintContext)\n  const screenStyles = useMemo(\n    () => `\n.adrian * { stroke: ${theme.palette.text.primary}; }\n.adrian .red-stroke { stroke: ${red[500]}; }\n.adrian .orange-stroke { stroke: ${orange[500]}; }\n.adrian .blue-stroke { stroke: ${blue[500]}; }\n.adrian .green-stroke { stroke: ${green[500]}; }\n.adrian .pink-stroke { stroke: ${pink[500]}; }\n.adrian .measure, *.measure * {\n  stroke: ${theme.palette.primary.main};\n  fill: ${theme.palette.primary.main};\n}\n.adrian .guide, .adrian .guide * {\n  stroke: ${theme.palette.secondary.main};\n  fill: ${theme.palette.secondary.main};\n}\n.adrian .glue, .adrian .guide .glue {\n  stroke: none;\n  fill: url(#glue);\n}\n`,\n    [theme],\n  )\n  return (\n    React.createElement(React.Fragment, null\n      , React.createElement('defs', null\n        , React.createElement('pattern', { id: \"glue\", patternUnits: \"userSpaceOnUse\", width: \"4\", height: \"4\",}\n          , React.createElement('path', {\n            d: \"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2\"\n\n                ,\n            style: { stroke: theme.palette.divider, strokeWidth: 1 },}\n          )\n        )\n      )\n      , React.createElement('style', null, `\n      .adrian * {\n        stroke: black;\n        stroke-width: .05mm;\n        fill: none;\n      }\n      .mountain, .mountain * { stroke-dasharray: 10,2,1,1,1,2; }\n      .valley, .valley * { stroke-dasharray: 1,1; }\n      .cut, .cut * { stroke: 1; }\n      `)\n      , !print && React.createElement('style', null, screenStyles)\n    )\n  )\n}\n"],"names":["PaperAutocomplete","forwardRef","disableClearance","onChange","value","label","ref","paperSize","a","b","A","disableClearable","size","freeSolo","renderInput","params","variant","e","newValue","trim","match","exec","widthStr","heightStr","getOptionLabel","val","width","height","name","options","ExportButtons","what","baseFileName","getPrintSVG","Provider","replace","onClick","svg","async","svgToPdf","blob","title","author","parseHash","hash","substring","split","map","part","key","decodeURIComponent","reduce","obj","objectToHash","o","Object","entries","encodeURIComponent","join","defaultDeserialize","x","v","NaN","isNaN","console","error","defaultSerialize","useHashState","initialState","deserialize","serialize","wait","createInitialState","useCallback","state","mergedState","assign","document","location","log","history","replaceState","undefined","setState","useState","updateHashRef","useRef","useEffect","ops","lastAccessLHS","i","length","op","fn","args","call","_optionalChain","_","current","_2","newState","pushState","onHashChange","window","addEventListener","removeEventListener","H","type","HORIZ_LINE_TO","relative","rx","ry","xAxisRotation","largeArcFlag","sweepFlag","p","lArcFlag","rX","rY","ARC","xRot","y","C","x1","y1","x2","y2","CURVE_TO","V","VERT_LINE_TO","M","a1","a2","MOVE_TO","L","LINE_TO","l","Z","CLOSE_PATH","encode","path","modPath","lastX","lastY","c","c2","push","lastC","round","Corner","rad","prevX","prevY","prev","p1","dir1","to","toLength","p2","minus","PAPER_SIZES_A","PAPER_SIZES_C","PAPER_SIZES","PaperSizeFromString","str","byName","find","PaperSizeFromDimensions","sort","lhs","rhsFn","PaperSizeToString","PAPER_SIZE_A4","SvgPrintContext","createContext","Guide","children","props","useContext","className","Measure","from","R","hideRight","offset","Array","isArray","d","textBlank","transform","angleXY","style","fill","stroke","fontSize","dominantBaseline","textAnchor","_nullishCoalesce","claspsSvg","DOMParser","parseFromString","documentElement","clasps","filter","tagName","id","getAttribute","getPath","inkscapeLabel","pathEl","Error","_3","_4","bottomFold","bottomCut","topCut","claspNames","EnvelopeDimensions","overlap","envelopeHeight","Math","min","r2","cos","h","sin","s","t","envelopeWidth","SQRT2","foldedCenter","SQRT1_2","EnvelopeSvg","cornerRadius","claspIds","r","clasp","g","includes","cArc","claspScale","outline","glue","valley","w","_h","refH","refW","refName","xmlns","viewBox","SvgCommonDefs","claspId","setPartialState","update","presets","useMemo","presetsForOverlap","PaperSize","Grid","container","xs","md","padding","sx","display","flexDirection","alignItems","gap","Card","CardMedia","image","paddingTop","TextField","inputProps","step","target","disabled","FormControl","InputLabel","Select","labelId","n","MenuItem","matchingPreset","Divider","theme","print","screenStyles","palette","text","primary","main","secondary","patternUnits","divider","strokeWidth"],"sourceRoot":""}