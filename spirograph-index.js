"use strict";(self.webpackChunkworkshop=self.webpackChunkworkshop||[]).push([[878],{4341:(t,e,n)=>{n.d(e,{q:()=>h});var r=n(6897),s=n.n(r),o=n(508),a=n.n(o),i=n(9526),l=n(6333);const c=t=>t?t.substring(1).split("&").map((t=>{const[e,n]=t.split("=");return[decodeURIComponent(e),decodeURIComponent(n)]})).reduce(((t,[e,n])=>(t[e]=n,t)),{}):{},u=t=>"#"+Object.entries(t).map((([t,e])=>encodeURIComponent(t)+"="+encodeURIComponent(e))).join("&"),m=t=>a()(t,((t,e)=>{if("paperSize"!==e)return"true"===t||"false"!==t&&("NaN"===t?NaN:"undefined"===t?void 0:"null"===t?null:""===t?"":isNaN(+t)?t:+t);try{return(0,l.nA)(t)}catch(t){return console.error(t),l.t1}})),d=t=>a()(t,((t,e)=>"paperSize"===e?(0,l.$Q)(t):""+t));function h(t,{deserialize:e=m,serialize:n=d,wait:r=1e3}={}){const o=(0,i.useCallback)((()=>{const r="function"==typeof t?t():t,s=e(Object.assign(n(r),c(document.location.hash)));return console.log("replaceState"),history.replaceState(void 0,document.title,u(n(s))),s}),[e,t,n]),[a,l]=(0,i.useState)(o),h=(0,i.useRef)();return(0,i.useEffect)((()=>function(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}([h,"access",t=>t.current,"optionalCall",t=>t(a)])),[a]),h.current||(console.log("pushState"),h.current=s()((function(t){history.pushState(void 0,document.title,u(n(t)))}),r)),(0,i.useEffect)((()=>{const t=()=>{l(o())};return window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}}),[o]),[a,l]}},6623:(t,e,n)=>{n.d(e,{F:()=>c});var r=n(8864),s=n(1413),o=n.n(s),a=n(9526),i=n(2279),l=n(9536);function c({what:t,baseFileName:e}){const s=()=>i.renderToStaticMarkup(a.createElement(l.kM.Provider,{value:!0},t)).replace(/\s{2,}/g," ");return a.createElement(a.Fragment,null,a.createElement(r.Z,{variant:"contained",onClick:()=>{const t=s();o()(t,e+".svg")}},"Download As SVG"),a.createElement(r.Z,{variant:"contained",onClick:async()=>{const{svgToPdf:t}=await Promise.all([n.e(853),n.e(898)]).then(n.bind(n,2566)),r=await t({title:e,author:"Adrian Leonhard",svg:s()});o()(r,e+".pdf")}},"Template as PDF"))}},9536:(t,e,n)=>{n.d(e,{UH:()=>i,fD:()=>a,kM:()=>o});var r=n(9526),s=n(2182);const o=(0,r.createContext)(!1);function a({children:t,...e}){return(0,r.useContext)(o)?null:r.createElement("g",{className:"guide",...e},t)}function i({from:t,to:e,children:n,hideRight:a=!1,offset:i=0}){Array.isArray(t)&&(t=(0,s.V)(t)),Array.isArray(e)&&(e=(0,s.V)(e));const l=t.to(e),c=l.length();if((0,r.useContext)(o))return null;if(c<.05)return null;n||=""+(0,s.At)(c,-1);const u=3*n.length;return r.createElement("g",{transform:` translate(${t[0]}, ${t[1]}) rotate(${l.angleXY()/s.Co}) translate(0, ${10*i})`,className:"measure"},!a&&r.createElement("path",{style:{fill:"none"},d:"M0,0\n          l0,10\n          M4,3\n          l-4,2\n          l4,2"}),r.createElement("path",{style:{fill:"none"},d:`\n        M0,5\n        H${(c-u)/2}\n        M${(c+u)/2},5\n        H${c}\n        M${c},0\n        l0,10\n        m-4,-7\n        l4,2\n        l-4,2`}),r.createElement("text",{style:{stroke:"none",fontSize:4,dominantBaseline:"middle",textAnchor:"middle"},x:c/2,y:5},n))}},6333:(t,e,n)=>{n.d(e,{$Q:()=>c,PN:()=>l,TL:()=>o,li:()=>a,nA:()=>i,t1:()=>u});var r=n(2182);const s=[[841,1189,"A0"],[594,841,"A1"],[420,594,"A2"],[297,420,"A3"],[210,297,"A4"],[148,210,"A5"],[105,148,"A6"],[74,105,"A7"],[52,74,"A8"],[37,52,"A9"],[26,37,"A10"]],o=[[917,1297,"C0"],[648,917,"C1"],[458,648,"C2"],[324,458,"C3"],[229,324,"C4"],[162,229,"C5"],[114,162,"C6"],[81,114,"C7"],[57,81,"C8"],[40,57,"C9"],[28,40,"C10"]],a=[...s,[150,150,"Origami 15cm"],[100,100,"Origami 10cm"],[75,75,"Origami 7.5cm"],[215.9,279.4,"Letter"],[215.9,355.6,"Legal"]];function i(t){const e=a.find((([,,e])=>e===t));if(e)return e;const[n,r]=t.split("x");return[+n,+r,"Custom"]}function l(t,e){return[t,e]=[t,e].sort(r.uK),null!=(n=a.find((([n,r])=>n===t&&r===e)))?n:(()=>[t,e,"Custom"])();var n}function c([t,e,n]){return"Custom"===n?t+"x"+e:n}const u=s[4]},5730:(t,e,n)=>{n.d(e,{r:()=>m});var r=n(4466),s=n(9817),o=n(1456),a=n(3569),i=n(4068),l=n(8051),c=n(9526),u=n(9536);const m=()=>{const t=(0,l.Z)(),e=(0,c.useContext)(u.kM),n=(0,c.useMemo)((()=>`\n.adrian * { stroke: ${t.palette.text.primary}; }\n.adrian .red-stroke { stroke: ${r.Z[500]}; }\n.adrian .orange-stroke { stroke: ${s.Z[500]}; }\n.adrian .blue-stroke { stroke: ${o.Z[500]}; }\n.adrian .green-stroke { stroke: ${a.Z[500]}; }\n.adrian .pink-stroke { stroke: ${i.Z[500]}; }\n.adrian .measure, *.measure * {\n  stroke: ${t.palette.primary.main};\n  fill: ${t.palette.primary.main};\n}\n.adrian .guide, .adrian .guide * {\n  stroke: ${t.palette.secondary.main};\n  fill: ${t.palette.secondary.main};\n}\n.adrian .glue, .adrian .guide .glue {\n  stroke: none;\n  fill: url(#glue);\n}\n`),[t]);return c.createElement(c.Fragment,null,c.createElement("defs",null,c.createElement("pattern",{id:"glue",patternUnits:"userSpaceOnUse",width:"4",height:"4"},c.createElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:t.palette.divider,strokeWidth:1}}))),c.createElement("style",null,"\n      .mountain, .mountain * { stroke-dasharray: 10,2,1,1,1,2; }\n      .valley, .valley * { stroke-dasharray: 1,1; }\n      .cut, .cut * { stroke: 1; }\n      "),!e&&c.createElement("style",null,n))}},6415:(t,e,n)=>{n.d(e,{PM:()=>o,Qn:()=>l,X$:()=>a,XJ:()=>i,YQ:()=>g,_x:()=>m,hv:()=>d,kC:()=>h,nl:()=>p,oe:()=>u,q3:()=>c});var r=n(9526),s=n(2182);const o=25.4,a=t=>(0,s.At)(t/s.Co,-1)+"Â°",i=(t,e)=>e/2/Math.sin(s.gc/t/2),l=(t,e)=>2*e*Math.sin(s.gc/t/2),c=(t,e)=>e/2/Math.tan(s.gc/t/2),u=(t,e)=>e/Math.cos(s.gc/t/2),m=(t,e)=>2*e*Math.tan(s.gc/t/2);function d({sides:t,radius:e,startAngle:n=0,sideLength:o,...a}){if(void 0!==o==(void 0!==e))throw new Error("must set either sideLength or radius");void 0===e&&(e=i(t,o));const{x:l,y:c}=s.V3.polar(e,n);return r.createElement("path",{d:p`
        M${l},${c}
        ${(0,s.hS)(0,t).map((r=>p`L${s.V3.polar(e,n+r*(s.gc/t))}`))}Z`,...a})}function h({id:t,children:e,count:n,stepDeg:o}){return r.createElement(r.Fragment,null,r.createElement("g",{id:t},e),(0,s.hS)(0,n-1).map((n=>r.createElement("g",{id:`${t}-${n}`,key:`${t}-${n}`,transform:`rotate(${(n+1)*o} 0 0)`},e))))}function p(t,...e){const n=t=>"number"==typeof t?""+t:"string"==typeof t?t:Array.isArray(t)?t.map(n).join(" "):t.x+","+t.y;let r=t[0];for(let s=0;s<e.length;s++)r+=n(e[s]),r+=t[s+1];return r}const g=t=>{const e=window.open(t,"_blank","noopener,noreferrer");e&&(e.opener=null)}},5609:(t,e,n)=>{n.d(e,{L:()=>a,M:()=>o,V:()=>s,Z:()=>l,l:()=>i});var r=n(4065);const s=t=>({type:r.OU.VERT_LINE_TO,y:t,relative:!1}),o=(t,e)=>({type:r.OU.MOVE_TO,x:t,y:e,relative:!1}),a=(t,e)=>({type:r.OU.LINE_TO,x:t,y:e,relative:!1}),i=(t,e)=>({type:r.OU.LINE_TO,x:t,y:e,relative:!0}),l=()=>({type:r.OU.CLOSE_PATH})},4838:(t,e,n)=>{n.d(e,{j:()=>a});var r=n(2182);function s(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}const o=["zoomIn","zoomOut","left","right","up","down"];class a{__init(){this.lastPos=r.V3.O}__init2(){this.pressedKeys={zoomIn:!1,zoomOut:!1,left:!1,right:!1,up:!1,down:!1}}__init3(){this.pauseCam=!1}__init4(){this.udRot=.1}__init5(){this.rot=0}__init6(){this.dist=10}constructor(t,e={zoomIn:"w",zoomOut:"s",left:"a",right:"d",up:" ",down:"Control"}){this.onCameraChange=t,this.keys=e,a.prototype.__init.call(this),a.prototype.__init2.call(this),a.prototype.__init3.call(this),a.prototype.__init4.call(this),a.prototype.__init5.call(this),a.prototype.__init6.call(this),a.prototype.__init7.call(this),a.prototype.__init8.call(this),a.prototype.__init9.call(this),a.prototype.__init10.call(this),a.prototype.__init11.call(this),a.prototype.__init12.call(this)}__init7(){this.setState=t=>{[this.udRot,this.rot,this.dist]=a.toOrbitCameraState(t)}}static toOrbitCameraState(t){if(t instanceof r.M4){const e=t.transposed().scale(-1).transformVector(t.getTranslation(),!1);return[Math.atan(e.z/e.lengthXY()),e.angleXY(),e.length()]}return t}registerListeners(t,e=t){return s([this,"access",t=>t.unregister,"optionalCall",t=>t()]),t.addEventListener("mousemove",this.mousemove),t.addEventListener("wheel",this.wheel),e.addEventListener("keydown",this.keydown),e.addEventListener("keyup",this.keyup),e.addEventListener("blur",this.keyup),this.unregister=()=>{t.removeEventListener("mousemove",this.mousemove),t.removeEventListener("wheel",this.wheel),e.removeEventListener("keydown",this.keydown),e.removeEventListener("keyup",this.keyup),e.removeEventListener("keyup",this.keyup)}}__init8(){this.blur=()=>{}}unregisterListeners(){s([this,"access",t=>t.unregister,"optionalCall",t=>t()])}tick(){const t=.1*(+this.pressedKeys.zoomOut-+this.pressedKeys.zoomIn),e=.1*(-+this.pressedKeys.left+ +this.pressedKeys.right),n=(0,r.uZ)(this.udRot+.1*(+this.pressedKeys.up-+this.pressedKeys.down),.5*-Math.PI,.5*Math.PI);0===t&&0===e&&n===this.udRot||(this.dist+=t,this.rot+=e,this.udRot=n,s([this,"access",t=>t.onCameraChange,"optionalCall",t=>t(this.ss)]))}__init9(){this.mousemove=t=>{const e=(0,r.V)(t.pageX,t.pageY),n=this.lastPos.to(e);if(1&t.buttons&&!this.pauseCam){const e=n.x/100,o=(0,r.uZ)(this.udRot+n.y/100,.5*-Math.PI,.5*Math.PI);o===this.udRot&&0===e||(this.udRot=o,this.rot+=e,s([this,"access",t=>t.onCameraChange,"optionalCall",t=>t(this.ss)]),t.stopImmediatePropagation(),t.preventDefault())}this.lastPos=e}}__init10(){this.wheel=t=>{const e=(0,r.uZ)(this.dist+t.deltaY,.1,1e3);e!==this.dist&&(this.dist=e,t.stopImmediatePropagation(),t.preventDefault(),s([this,"access",t=>t.onCameraChange,"optionalCall",t=>t(this.ss)]))}}get ss(){return[this.udRot,this.rot,this.dist]}__init11(){this.keydown=t=>{for(const e of o)if(this.keys[e]===t.key)return this.pressedKeys[e]=!0,t.stopImmediatePropagation(),void t.preventDefault()}}__init12(){this.keyup=t=>{for(const e of o)if(this.keys[e]===t.key)return this.pressedKeys[e]=!1,t.stopImmediatePropagation(),void t.preventDefault()}}getLookAt(){return a.getLookAt(this.ss)}static getLookAt([t,e,n]){return r.M4.rotateZ(e).rotateY(t).transform(r.M4.lookAt((0,r.V)(n,0,0),r.V3.O,r.V3.Z))}static invertLookAt(t){const e=t.transposed().scale(-1);return{eye:e.transformVector(t.getTranslation(),!1),dir:e.transformVector(r.V3.Z,!1),up:e.transformVector(r.V3.Y.negated(),!1)}}static toShortString(t,e=100){const[n,r,s]=this.toOrbitCameraState(t),o=(t,e)=>Math.floor(t*e);return o(n,100)+"~"+o(r,100)+"~"+o(s,100)}static fromShortString(t,e=100){const n=(t,e)=>+t/e,[r,s,o]=t.split("~");return[n(r,100),n(s,100),n(o,100)]}}},52:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});var r=n(5069),s=n(4353),o=n(3394),a=n(871),i=n(8051),l=n(3121),c=n(9526),u=n(4065),m=n(2182),d=n(4341),h=n(6415),p=n(6623),g=n(5609),y=n(5730),f=n(4838);const v=()=>{const[t,e]=(0,d.q)({R:100,r:10,d:20,cam:f.j.toShortString([.1,.1,400])}),n=(0,c.useCallback)((t=>e((e=>({...e,...t})))),[e]),v=f.j.getLookAt(f.j.fromShortString(t.cam)),k=(0,c.useRef)();(0,c.useEffect)((()=>{const e=new f.j((t=>n({cam:f.j.toShortString(t)})));e.setState(f.j.fromShortString(t.cam)),e.registerListeners(k.current);let r=!1;return requestAnimationFrame((function t(){e.tick(),r||requestAnimationFrame(t)})),()=>{r=!0,function(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}}([e,"optionalAccess",t=>t.unregisterListeners,"call",t=>t()])}}),[n]),(0,i.Z)();const C=t.R,E=t.r,_=t.d,w=v.transform(m.M4.perspective(90,1,10,1e3)).scale(200,-200,1),x=w.inversed().transposed().normalized2();console.log("normalMatrix",x.toString());const A=((t,e,n)=>n=>{const r=n/60,s=n,o=m.V3.polar(e,s);return[m.M4.translate(t).rotateY(r).transformPoint(o),m.M4.rotateY(r).transformVector(m.V3.polar(1,s))]})(C,E),M=[g.M(C+E-_,0)],L=[g.M(C+E-_,0)];for(let t=0;t<21600*m.Co;t+=10*m.Co){const e=t,[n,r]=A(e),s=w.transformPoint(n),o=1e-4,a=w.transformPoint(A(e+o)[0]).minus(s).div(o).times(_/100),i=(s.minus(a),x.transformVector(r,!1));i.xy().toLength(10),i.z<=0?M.push(g.L(s.x,s.y)):M.push(g.M(s.x,s.y))}const P=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",ref:k,className:"adrian",width:"512",height:"512",style:{fill:"none",stroke:"#123456",strokeWidth:2*h.PM/300,width:"100%",height:"100%"},viewBox:"-256 -256 512 512"},c.createElement(y.r,null),c.createElement((function({mat:t}){const e=t.transformPoint(m.V3.O),n=t.transformPoint(m.V3.X),r=t.transformPoint(m.V3.Y),s=t.transformPoint(m.V3.Z);return c.createElement(c.Fragment,null,c.createElement("line",{x1:e.x,y1:e.y,x2:n.x,y2:n.y,style:{stroke:"red"}}),c.createElement("line",{x1:e.x,y1:e.y,x2:r.x,y2:r.y,style:{stroke:"green"}}),c.createElement("line",{x1:e.x,y1:e.y,x2:s.x,y2:s.y,style:{stroke:"blue"}}))}),{mat:w.scale(25)}),c.createElement("path",{d:new u.OU(M).encode(),className:"cut",style:{fill:"none"}}),c.createElement("path",{d:new u.OU(L).encode(),className:"cut",style:{fill:"green",stroke:"green"}}));return c.createElement(a.ZP,{container:!0,style:{width:"100%"}},c.createElement(a.ZP,{item:!0,xs:12,md:10},P),c.createElement(a.ZP,{item:!0,xs:12,md:2,sx:{display:"flex",flexDirection:"column",width:"100%",padding:2,alignItems:"stretch",gap:2}},c.createElement(r.Z,null,c.createElement(s.Z,{image:"",title:"Contemplative Reptile",sx:{height:0,paddingTop:"100%"}})),c.createElement(l.Z,{label:"R",variant:"outlined",size:"small",type:"number",inputProps:{min:25,step:1},value:t.R,onChange:t=>n({R:+t.target.value})}),c.createElement(l.Z,{variant:"outlined",size:"small",type:"number",inputProps:{min:-100,step:1},value:t.r,onChange:t=>n({r:+t.target.value}),label:"r"}),c.createElement(l.Z,{variant:"outlined",size:"small",type:"number",inputProps:{min:0,step:1},value:t.d,onChange:t=>n({d:+t.target.value}),label:"d"}),c.createElement(o.Z,null),c.createElement(p.F,{what:P,baseFileName:"donut"})))}}}]);
//# sourceMappingURL=spirograph-index.js.map